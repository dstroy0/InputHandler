<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="prev" title="InputHandler.h" href="InputHandler_h.html" />

    <meta name="generator" content="sphinx-5.2.0.post0, furo 2022.09.15"/>
        <title>InputHandler.cpp - InputHandler documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=9ec31e2665bf879c1d47d93a8ec4893870ee1e45" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">InputHandler  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">InputHandler  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Command Line Interface Generation tool reference (InputHandler.h)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Design Goals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#news">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html#supported-platforms">Supported Platforms</a></li>
<li class="toctree-l1"><a class="reference external" href="https://dstroy0.github.io/InputHandler/cli_gen_tool/index.html">cli_gen_tool docs</a></li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../docs.html">Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="config/config_h_docs.html">config.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="InputHandler_h_docs.html">InputHandler.h</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../src.html">Source</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="config/config_h.html">config.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="InputHandler_h.html">InputHandler.h</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">InputHandler.cpp</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="inputhandler-cpp">
<h1>InputHandler.cpp<a class="headerlink" href="#inputhandler-cpp" title="Permalink to this heading">#</a></h1>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">src/InputHandler.cpp</span><a class="headerlink" href="#id1" title="Permalink to this code">#</a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos">   1</span><span class="cm">/**</span>
<span class="linenos">   2</span><span class="cm"> *  @file InputHandler.cpp</span>
<span class="linenos">   3</span><span class="cm"> *  @author Douglas Quigg (dstroy0 dquigg123@gmail.com)</span>
<span class="linenos">   4</span><span class="cm"> *  @brief InputHandler library cpp file</span>
<span class="linenos">   5</span><span class="cm"> *  @version 1.1</span>
<span class="linenos">   6</span><span class="cm"> *  @date 2022-05-28</span>
<span class="linenos">   7</span><span class="cm"> *</span>
<span class="linenos">   8</span><span class="cm"> *  @copyright Copyright (c) 2022</span>
<span class="linenos">   9</span><span class="cm"> */</span><span class="w"></span>
<span class="linenos">  10</span><span class="cm">/*</span>
<span class="linenos">  11</span><span class="cm"> *   Copyright (C) 2022 Douglas Quigg (dstroy0) &lt;dquigg123@gmail.com&gt;</span>
<span class="linenos">  12</span><span class="cm"> *</span>
<span class="linenos">  13</span><span class="cm"> *   This program is free software; you can redistribute it and/or</span>
<span class="linenos">  14</span><span class="cm"> *   modify it under the terms of the GNU General Public License</span>
<span class="linenos">  15</span><span class="cm"> *   version 3 as published by the Free Software Foundation.</span>
<span class="linenos">  16</span><span class="cm"> */</span><span class="w"></span>
<span class="linenos">  17</span>
<span class="linenos">  18</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;InputHandler.h&quot;</span><span class="cp"></span>
<span class="linenos">  19</span>
<span class="linenos">  20</span><span class="cm">/*</span>
<span class="linenos">  21</span><span class="cm"> *   public methods</span>
<span class="linenos">  22</span><span class="cm"> */</span><span class="w"></span>
<span class="linenos">  23</span>
<span class="linenos">  24</span><span class="cm">/**</span>
<span class="linenos">  25</span><span class="cm"> * UserInput::defaultFunction</span>
<span class="linenos">  26</span><span class="cm"> */</span><span class="w"></span>
<span class="linenos">  27</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::defaultFunction</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">function</span><span class="p">)(</span><span class="n">UserInput</span><span class="o">*</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">_default_function_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">function</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// end defaultFunction</span>
<span class="linenos">  28</span>
<span class="linenos">  29</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::addCommand</span><span class="p">(</span><span class="n">CommandConstructor</span><span class="o">&amp;</span><span class="w"> </span><span class="n">command</span><span class="p">)</span><span class="w"></span>
<span class="linenos">  30</span><span class="p">{</span><span class="w"></span>
<span class="linenos">  31</span><span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">max_depth_found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// for _data_pointers_ array sizing</span>
<span class="linenos">  32</span><span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">max_args_found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">  </span><span class="c1">// for _data_pointers_ array sizing</span>
<span class="linenos">  33</span><span class="w">    </span><span class="n">CommandParameters</span><span class="w"> </span><span class="n">prm</span><span class="p">;</span><span class="w">      </span><span class="c1">// this CommandParameters struct is referenced by the helper function _addCommandAbort()</span>
<span class="linenos">  34</span><span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">wc_containing_prm_found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">  35</span><span class="w">    </span><span class="n">IH</span><span class="o">::</span><span class="n">memcmp_idx_t</span><span class="w"> </span><span class="n">wc_containing_prm_index_arr</span><span class="p">[</span><span class="n">UI_MAX_COMMANDS_IN_TREE</span><span class="p">]</span><span class="w"> </span><span class="p">{};</span><span class="w"> </span><span class="c1">// max possible amount of subcommands + root command</span>
<span class="linenos">  36</span><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w">                                                         </span><span class="c1">// CommandParameters struct error sentinel</span>
<span class="linenos">  37</span><span class="w">    </span><span class="cm">/*</span>
<span class="linenos">  38</span><span class="cm">        the reason we run through the whole CommandParameters array instead of breaking</span>
<span class="linenos">  39</span><span class="cm">        on error is to give users clues as to what might be wrong with their</span>
<span class="linenos">  40</span><span class="cm">        command CommandParameters</span>
<span class="linenos">  41</span><span class="cm">    */</span><span class="w"></span>
<span class="linenos">  42</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">param_array_len</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">  43</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">  44</span><span class="w">        </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">prm</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="n">prm</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">prm</span><span class="p">));</span><span class="w"></span>
<span class="linenos">  45</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">UserInput</span><span class="o">::</span><span class="n">_addCommandAbort</span><span class="p">(</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">prm</span><span class="p">))</span><span class="w"> </span><span class="c1">// input CommandParameters error checking</span>
<span class="linenos">  46</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">  47</span><span class="w">            </span><span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">  48</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">  49</span><span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="linenos">  50</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">  51</span><span class="w">            </span><span class="n">max_depth_found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="n">tree_depth</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">max_depth_found</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">command</span><span class="p">.</span><span class="n">tree_depth</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">max_depth_found</span><span class="p">;</span><span class="w"></span>
<span class="linenos">  52</span><span class="w">            </span><span class="n">max_args_found</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">max_args_found</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">max_args_found</span><span class="p">;</span><span class="w"></span>
<span class="linenos">  53</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">has_wildcards</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="linenos">  54</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">  55</span><span class="w">                </span><span class="n">wc_containing_prm_index_arr</span><span class="p">[</span><span class="n">wc_containing_prm_found</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"></span>
<span class="linenos">  56</span><span class="w">                </span><span class="n">wc_containing_prm_found</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">  57</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">  58</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">  59</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">  60</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="c1">// if no error</span>
<span class="linenos">  61</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">  62</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">wc_containing_prm_found</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// if the number of wildcard containing CommandParameters is greater than zero</span>
<span class="linenos">  63</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">  64</span><span class="w">            </span><span class="n">command</span><span class="p">.</span><span class="n">calc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">CommandRuntimeCalc</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">CommandRuntimeCalc</span><span class="p">));</span><span class="w"></span>
<span class="linenos">  65</span><span class="w">            </span><span class="n">command</span><span class="p">.</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">num_prm_with_wc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">IH</span><span class="o">::</span><span class="n">memcmp_idx_t</span><span class="p">)</span><span class="n">wc_containing_prm_found</span><span class="p">;</span><span class="w"></span>
<span class="linenos">  66</span><span class="w">            </span><span class="n">command</span><span class="p">.</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">idx_of_prm_with_wc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">IH</span><span class="o">::</span><span class="n">memcmp_idx_t</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">wc_containing_prm_found</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">IH</span><span class="o">::</span><span class="n">memcmp_idx_t</span><span class="p">));</span><span class="w"></span>
<span class="linenos">  67</span><span class="w">            </span><span class="n">command</span><span class="p">.</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">num_memcmp_ranges_this_row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">IH</span><span class="o">::</span><span class="n">ui_max_per_cmd_memcmp_ranges_t</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">wc_containing_prm_found</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">IH</span><span class="o">::</span><span class="n">ui_max_per_cmd_memcmp_ranges_t</span><span class="p">));</span><span class="w"></span>
<span class="linenos">  68</span><span class="w">            </span><span class="n">command</span><span class="p">.</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">IH</span><span class="o">::</span><span class="n">ui_max_per_cmd_memcmp_ranges_t</span><span class="o">**</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">wc_containing_prm_found</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">IH</span><span class="o">::</span><span class="n">ui_max_per_cmd_memcmp_ranges_t</span><span class="o">*</span><span class="p">));</span><span class="w"></span>
<span class="linenos">  69</span><span class="w">            </span><span class="n">memcpy</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">idx_of_prm_with_wc</span><span class="p">,</span><span class="w"> </span><span class="n">wc_containing_prm_index_arr</span><span class="p">,</span><span class="w"> </span><span class="n">wc_containing_prm_found</span><span class="p">);</span><span class="w"></span>
<span class="linenos">  70</span><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">wc_containing_prm_found</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">  71</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">  72</span><span class="w">                </span><span class="n">IH</span><span class="o">::</span><span class="n">ui_max_per_cmd_memcmp_ranges_t</span><span class="w"> </span><span class="n">memcmp_ranges</span><span class="p">[</span><span class="n">UI_MAX_PER_CMD_MEMCMP_RANGES</span><span class="p">]</span><span class="w"> </span><span class="p">{};</span><span class="w"></span>
<span class="linenos">  73</span><span class="w">                </span><span class="n">IH</span><span class="o">::</span><span class="n">ui_max_per_cmd_memcmp_ranges_t</span><span class="w"> </span><span class="n">memcmp_ranges_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">  74</span><span class="w">                </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">prm</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="n">prm</span><span class="p">[</span><span class="n">wc_containing_prm_index_arr</span><span class="p">[</span><span class="n">i</span><span class="p">]]),</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">prm</span><span class="p">));</span><span class="w"></span>
<span class="linenos">  75</span><span class="w">                </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_calcCmdMemcmpRanges</span><span class="p">(</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">prm</span><span class="p">,</span><span class="w"> </span><span class="n">wc_containing_prm_index_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">memcmp_ranges_idx</span><span class="p">,</span><span class="w"> </span><span class="n">memcmp_ranges</span><span class="p">);</span><span class="w"></span>
<span class="linenos">  76</span><span class="w">                </span><span class="n">command</span><span class="p">.</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">num_memcmp_ranges_this_row</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">memcmp_ranges_idx</span><span class="p">;</span><span class="w"></span>
<span class="linenos">  77</span><span class="w">                </span><span class="n">command</span><span class="p">.</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">IH</span><span class="o">::</span><span class="n">ui_max_per_cmd_memcmp_ranges_t</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">memcmp_ranges_idx</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">IH</span><span class="o">::</span><span class="n">ui_max_per_cmd_memcmp_ranges_t</span><span class="p">));</span><span class="w"></span>
<span class="linenos">  78</span><span class="w">                </span><span class="n">memcpy</span><span class="p">(</span><span class="n">command</span><span class="p">.</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="o">&amp;</span><span class="n">memcmp_ranges</span><span class="p">,</span><span class="w"> </span><span class="n">memcmp_ranges_idx</span><span class="p">);</span><span class="w"></span>
<span class="linenos">  79</span><span class="cp">#if defined(__DEBUG_ADDCOMMAND__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos">  80</span><span class="w">                </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;cmd %s memcmp_ranges_arr num elements: %d</span><span class="se">\n</span><span class="s">memcmp ranges: </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">memcmp_ranges_idx</span><span class="p">);</span><span class="w"></span>
<span class="linenos">  81</span><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">memcmp_ranges_idx</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">j</span><span class="p">)</span><span class="w"></span>
<span class="linenos">  82</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos">  83</span><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos">  84</span><span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">  85</span><span class="w">                        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;%d, &quot;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="p">)</span><span class="n">command</span><span class="p">.</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">  86</span><span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">  87</span><span class="w">                    </span><span class="k">else</span><span class="w"></span>
<span class="linenos">  88</span><span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">  89</span><span class="w">                        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="p">)</span><span class="n">command</span><span class="p">.</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">  90</span><span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">  91</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos">  92</span><span class="cp">#endif</span>
<span class="linenos">  93</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">  94</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">  95</span><span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="linenos">  96</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">  97</span><span class="w">            </span><span class="c1">// CommandConstructor sets this pointer null, this is here for clarity</span>
<span class="linenos">  98</span><span class="w">            </span><span class="n">command</span><span class="p">.</span><span class="n">calc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="linenos">  99</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 100</span><span class="w">        </span><span class="n">_commands_count_</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 101</span><span class="w">        </span><span class="n">_max_depth_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">max_depth_found</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">_max_depth_</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">max_depth_found</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">_max_depth_</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 102</span><span class="w">        </span><span class="n">_max_args_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">max_args_found</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">_max_args_</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">max_args_found</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">_max_args_</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 103</span>
<span class="linenos"> 104</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_commands_head_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="c1">// the linked-list is empty</span>
<span class="linenos"> 105</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 106</span><span class="w">            </span><span class="n">_commands_head_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_commands_tail_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">command</span><span class="p">;</span><span class="w"> </span><span class="c1">// (this) is the beginning of the linked-list</span>
<span class="linenos"> 107</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 108</span><span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="linenos"> 109</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 110</span><span class="w">            </span><span class="n">_commands_tail_</span><span class="o">-&gt;</span><span class="n">next_command</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">command</span><span class="p">;</span><span class="w"> </span><span class="c1">// single linked-list (next only)</span>
<span class="linenos"> 111</span><span class="w">            </span><span class="n">_commands_tail_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">command</span><span class="p">;</span><span class="w">               </span><span class="c1">// move the tail to (this)</span>
<span class="linenos"> 112</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 113</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 114</span><span class="p">}</span><span class="w"> </span><span class="c1">// end addCommand</span>
<span class="linenos"> 115</span>
<span class="linenos"> 116</span><span class="kt">bool</span><span class="w"> </span><span class="nf">UserInput::begin</span><span class="p">()</span><span class="w"></span>
<span class="linenos"> 117</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 118</span><span class="w">    </span><span class="n">_p_num_ptrs_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1U</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_max_depth_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_max_args_</span><span class="p">;</span><span class="w"> </span><span class="c1">// root + max depth found + max args found (in UserInput::addCommand())</span>
<span class="linenos"> 119</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_max_args_</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 120</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 121</span><span class="w">        </span><span class="n">_input_type_match_flags_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">IH</span><span class="o">::</span><span class="n">input_type_match_flags_type</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">_max_args_</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">IH</span><span class="o">::</span><span class="n">input_type_match_flags_type</span><span class="p">));</span><span class="w"> </span><span class="c1">// this array lives the lifetime of the process</span>
<span class="linenos"> 122</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 123</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_input_type_match_flags_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">_max_args_</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 124</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 125</span><span class="cp">#if defined(UI_VERBOSE) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 126</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;ERROR! Cannot allocate ram for _input_type_match_flags_</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 127</span><span class="cp">#endif</span>
<span class="linenos"> 128</span><span class="w">        </span><span class="n">_begin_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 129</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">_begin_</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 130</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 131</span><span class="w">    </span><span class="n">_data_pointers_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">**</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">_p_num_ptrs_</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">));</span><span class="w"> </span><span class="c1">// as does this array of pointers</span>
<span class="linenos"> 132</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_data_pointers_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 133</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 134</span><span class="cp">#if defined(UI_VERBOSE) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 135</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;ERROR! Cannot allocate ram for _data_pointers_</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 136</span><span class="cp">#endif</span>
<span class="linenos"> 137</span><span class="w">        </span><span class="n">_begin_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 138</span><span class="w">        </span><span class="n">free</span><span class="p">(</span><span class="n">_input_type_match_flags_</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 139</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">_begin_</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 140</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 141</span><span class="w">    </span><span class="n">_begin_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 142</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">_begin_</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 143</span><span class="p">}</span><span class="w"> </span><span class="c1">// end begin</span>
<span class="linenos"> 144</span>
<span class="linenos"> 145</span><span class="cp">#if defined(ENABLE_listSettings) &amp;&amp; defined(UI_VERBOSE) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 146</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::listSettings</span><span class="p">(</span><span class="n">UserInput</span><span class="o">*</span><span class="w"> </span><span class="n">inputProcess</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 147</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 148</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">_begin_</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 149</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 150</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;UserInput::begin() not declared.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 151</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 152</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 153</span><span class="w">    </span><span class="n">IH_pname</span><span class="w"> </span><span class="n">process_name</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 154</span><span class="w">    </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">process_name</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 155</span><span class="w">    </span><span class="n">IH_eol</span><span class="w"> </span><span class="n">eol</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 156</span><span class="w">    </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">eol</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">eol_char</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">eol</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 157</span><span class="w">    </span><span class="n">IH_input_cc</span><span class="w"> </span><span class="n">input_control_char_sequence</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 158</span><span class="w">    </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">input_control_char_sequence</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">input_control_char_sequence</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">input_control_char_sequence</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 159</span><span class="w">    </span><span class="n">InputProcessDelimiterSequences</span><span class="w"> </span><span class="n">delimseqs</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 160</span><span class="w">    </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">delimseqs</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">delimiter_sequences</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">delimseqs</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 161</span><span class="w">    </span><span class="n">InputProcessStartStopSequences</span><span class="w"> </span><span class="n">ststpseqs</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 162</span><span class="w">    </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ststpseqs</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">start_stop_sequences</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">ststpseqs</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 163</span><span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">buf_sz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strlen</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">eol</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">strlen</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">input_control_char_sequence</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2U</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 164</span>
<span class="linenos"> 165</span><span class="w">    </span><span class="c1">// should loop through and strlen everything</span>
<span class="linenos"> 166</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">((</span><span class="n">delimseqs</span><span class="p">.</span><span class="n">num_seq</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">ststpseqs</span><span class="p">.</span><span class="n">num_seq</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">delimseqs</span><span class="p">.</span><span class="n">num_seq</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">ststpseqs</span><span class="p">.</span><span class="n">num_seq</span><span class="p">);</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 167</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 168</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">delimseqs</span><span class="p">.</span><span class="n">num_seq</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 169</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 170</span><span class="w">            </span><span class="n">buf_sz</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">delimseqs</span><span class="p">.</span><span class="n">delimiter_lens</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<span class="linenos"> 171</span><span class="w">            </span><span class="n">buf_sz</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 172</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 173</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">ststpseqs</span><span class="p">.</span><span class="n">num_seq</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 174</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 175</span><span class="w">            </span><span class="n">buf_sz</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ststpseqs</span><span class="p">.</span><span class="n">start_stop_sequence_lens</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<span class="linenos"> 176</span><span class="w">            </span><span class="n">buf_sz</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 177</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 178</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 179</span><span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">buf_sz</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">UI_ESCAPED_CHAR_STRLEN</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">));</span><span class="w"> </span><span class="c1">// allocate char buffer large enough to print these potential control characters</span>
<span class="linenos"> 180</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">buf</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 181</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 182</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;ERROR: listSettings() cannot allocate ram to escape control char so they will print.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 183</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 184</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 185</span><span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 186</span><span class="w">    </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;src/config/InputHandler_config.h:</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 187</span><span class="w">                            </span><span class="s">&quot;UI_MAX_ARGS_PER_COMMAND %lu max allowed arguments per unique command_id</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 188</span><span class="w">                            </span><span class="s">&quot;UI_MAX_CMD_LEN (root command) %lu characters</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 189</span><span class="w">                            </span><span class="s">&quot;UI_MAX_IN_LEN %lu bytes</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 190</span><span class="w">                            </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">UserInput constructor:</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 191</span><span class="w">                            </span><span class="s">&quot;output buffer size in bytes = %lu</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 192</span><span class="w">                            </span><span class="s">&quot;process_name = </span><span class="se">\&quot;</span><span class="s">%s</span><span class="se">\&quot;\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 193</span><span class="w">                            </span><span class="s">&quot;_data_pointers_[root(1) + _max_depth_ + _max_args_] == [%02lu]</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 194</span><span class="w">                            </span><span class="s">&quot;_max_depth_ (found from input CommandParameters) = %lu</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 195</span><span class="w">                            </span><span class="s">&quot;_max_args_ (found from input CommandParameters) = %lu</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 196</span><span class="w">                            </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Escaped for display:</span><span class="se">\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 197</span><span class="w">                            </span><span class="s">&quot;input_control_char_sequence = </span><span class="se">\&quot;</span><span class="s">%s</span><span class="se">\&quot;\n</span><span class="s">&quot;</span><span class="w"></span>
<span class="linenos"> 198</span><span class="w">                            </span><span class="s">&quot;peol = </span><span class="se">\&quot;</span><span class="s">%s</span><span class="se">\&quot;\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"></span>
<span class="linenos"> 199</span><span class="w">        </span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">UI_MAX_ARGS_PER_COMMAND</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">UI_MAX_CMD_LEN</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">UI_MAX_INPUT_LEN</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">_output_buffer_len_</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">_p_num_ptrs_</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 200</span><span class="w">        </span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">_max_depth_</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">)</span><span class="n">_max_args_</span><span class="p">,</span><span class="w"> </span><span class="n">_addEscapedControlCharToBuffer</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">idx</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">input_control_char_sequence</span><span class="p">,</span><span class="w"> </span><span class="n">strlen</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">input_control_char_sequence</span><span class="p">)),</span><span class="w"></span>
<span class="linenos"> 201</span><span class="w">        </span><span class="n">_addEscapedControlCharToBuffer</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">idx</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">eol</span><span class="p">,</span><span class="w"> </span><span class="n">strlen</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">eol</span><span class="p">)));</span><span class="w"></span>
<span class="linenos"> 202</span><span class="w">    </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;pdelimseqs = delim&lt;</span><span class="se">\&quot;\&quot;</span><span class="s">&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 203</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">delimseqs</span><span class="p">.</span><span class="n">num_seq</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 204</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 205</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&lt;</span><span class="se">\&quot;</span><span class="s">%s</span><span class="se">\&quot;</span><span class="s">&gt;%c&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_addEscapedControlCharToBuffer</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">idx</span><span class="p">,</span><span class="w"> </span><span class="n">delimseqs</span><span class="p">.</span><span class="n">delimiter_sequences</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">delimseqs</span><span class="p">.</span><span class="n">delimiter_sequences</span><span class="p">[</span><span class="n">i</span><span class="p">])),</span><span class="w"></span>
<span class="linenos"> 206</span><span class="w">            </span><span class="p">(((</span><span class="n">delimseqs</span><span class="p">.</span><span class="n">num_seq</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5U</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sc">&#39;|&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">((</span><span class="n">i</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5U</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">)));</span><span class="w"> </span><span class="c1">// separate &lt;&gt; with a pipe | and start a newline every 5 sequences</span>
<span class="linenos"> 207</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 208</span><span class="w">    </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;pststpseqs = start&lt;</span><span class="se">\&quot;\&quot;</span><span class="s">&gt;|stop&lt;</span><span class="se">\&quot;\&quot;</span><span class="s">&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 209</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">ststpseqs</span><span class="p">.</span><span class="n">num_seq</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 210</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 211</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&lt;</span><span class="se">\&quot;</span><span class="s">%s</span><span class="se">\&quot;</span><span class="s">&gt;|&lt;</span><span class="se">\&quot;</span><span class="s">%s</span><span class="se">\&quot;</span><span class="s">&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"></span>
<span class="linenos"> 212</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_addEscapedControlCharToBuffer</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">idx</span><span class="p">,</span><span class="w"> </span><span class="n">ststpseqs</span><span class="p">.</span><span class="n">start_stop_sequence_pairs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">ststpseqs</span><span class="p">.</span><span class="n">start_stop_sequence_pairs</span><span class="p">[</span><span class="n">i</span><span class="p">])),</span><span class="w"></span>
<span class="linenos"> 213</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_addEscapedControlCharToBuffer</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">idx</span><span class="p">,</span><span class="w"> </span><span class="n">ststpseqs</span><span class="p">.</span><span class="n">start_stop_sequence_pairs</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">ststpseqs</span><span class="p">.</span><span class="n">start_stop_sequence_pairs</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">])));</span><span class="w"></span>
<span class="linenos"> 214</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 215</span><span class="w">    </span><span class="n">free</span><span class="p">(</span><span class="n">buf</span><span class="p">);</span><span class="w"> </span><span class="c1">// cleanup</span>
<span class="linenos"> 216</span><span class="p">}</span><span class="w"> </span><span class="c1">// end listSettings</span>
<span class="linenos"> 217</span><span class="cp">#endif </span><span class="c1">// end ENABLE_listSettings</span>
<span class="linenos"> 218</span>
<span class="linenos"> 219</span><span class="cp">#if defined(ENABLE_listCommands) &amp;&amp; defined(UI_VERBOSE) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 220</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::listCommands</span><span class="p">()</span><span class="w"></span>
<span class="linenos"> 221</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 222</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">_begin_</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 223</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 224</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;UserInput::begin() not declared.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 225</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 226</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 227</span><span class="w">    </span><span class="n">CommandConstructor</span><span class="o">*</span><span class="w"> </span><span class="n">cmd</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 228</span><span class="w">    </span><span class="n">IH_pname</span><span class="w"> </span><span class="n">process_name</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 229</span><span class="w">    </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">process_name</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 230</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">process_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">_null_</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 231</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 232</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;Commands available:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 233</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 234</span><span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="linenos"> 235</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 236</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;Commands available to %s:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 237</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 238</span><span class="w">    </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 239</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_commands_head_</span><span class="p">;</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"> </span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">next_command</span><span class="p">,</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 240</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 241</span><span class="w">        </span><span class="kt">char</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">UI_MAX_CMD_LEN</span><span class="p">];</span><span class="w"></span>
<span class="linenos"> 242</span><span class="w">        </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">prm</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 243</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot; %02u. &lt;%s&gt;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 244</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 245</span><span class="p">}</span><span class="w"> </span><span class="c1">// end listCommands</span>
<span class="linenos"> 246</span><span class="cp">#endif </span><span class="c1">// end ENABLE_listCommands</span>
<span class="linenos"> 247</span>
<span class="linenos"> 248</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::readCommandFromBuffer</span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="w"> </span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">len</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">num_zdc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">CommandParameters</span><span class="o">**</span><span class="w"> </span><span class="n">zdc</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 249</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 250</span><span class="w">    </span><span class="c1">// error checking</span>
<span class="linenos"> 251</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">_begin_</span><span class="p">)</span><span class="w"> </span><span class="c1">// error</span>
<span class="linenos"> 252</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 253</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 254</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 255</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">len</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">UI_MAX_INPUT_LEN</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 256</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 257</span><span class="cp">#if defined(__DEBUG_READCOMMANDFROMBUFFER__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 258</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$ERROR: input is too long.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">pgm_read_dword</span><span class="p">(</span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">process_name</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 259</span><span class="cp">#endif</span>
<span class="linenos"> 260</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 261</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 262</span><span class="w">    </span><span class="n">_rcfbprm</span><span class="w"> </span><span class="n">rprm</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 263</span><span class="w">    </span><span class="c1">// initial settings</span>
<span class="linenos"> 264</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">launch_attempted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w">               </span><span class="c1">// made it to launchFunction if true</span>
<span class="linenos"> 265</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">command_matched</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w">                </span><span class="c1">// error sentinel, true if error</span>
<span class="linenos"> 266</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_arguments_valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w">             </span><span class="c1">// error sentinel, false if error</span>
<span class="linenos"> 267</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">subcommand_matched</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w">             </span><span class="c1">// subcommand match flag, true on match</span>
<span class="linenos"> 268</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w">                             </span><span class="c1">// command parameters pointer (for loop linked-list iterator)</span>
<span class="linenos"> 269</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w">                     </span><span class="c1">// all wcc cmd ptr, NULL if no all wcc cmd</span>
<span class="linenos"> 270</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_match</span><span class="p">;</span><span class="w">                      </span><span class="c1">// the result of UserInput::_compareCommandToString</span>
<span class="linenos"> 271</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">command_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">root</span><span class="p">;</span><span class="w">                      </span><span class="c1">// 16-bit command id starts at root</span>
<span class="linenos"> 272</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">                                </span><span class="c1">// CommandParameters index</span>
<span class="linenos"> 273</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">                        </span><span class="c1">// index of all wcc CommandParameters</span>
<span class="linenos"> 274</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">input_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w">                        </span><span class="c1">// input_len can change, len cannot</span>
<span class="linenos"> 275</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">token_buffer_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">input_len</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">;</span><span class="w"> </span><span class="c1">// the token buffer will always be at least one larger than input</span>
<span class="linenos"> 276</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">                    </span><span class="c1">// amount of delimiter separated tokens</span>
<span class="linenos"> 277</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">input_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span><span class="w">                      </span><span class="c1">// working pointer, can point at data or split_input</span>
<span class="linenos"> 278</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w">                     </span><span class="c1">// split input will be NULL unless there are zero delim commands</span>
<span class="linenos"> 279</span>
<span class="linenos"> 280</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">UserInput</span><span class="o">::</span><span class="n">_splitZDC</span><span class="p">(</span><span class="n">rprm</span><span class="p">,</span><span class="w"> </span><span class="n">num_zdc</span><span class="p">,</span><span class="w"> </span><span class="n">zdc</span><span class="p">))</span><span class="w"></span>
<span class="linenos"> 281</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 282</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">input_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="p">;</span><span class="w"> </span><span class="c1">// the input command and data have been split</span>
<span class="linenos"> 283</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 284</span>
<span class="linenos"> 285</span><span class="w">    </span><span class="n">_token_buffer_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">token_buffer_len</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">));</span><span class="w"> </span><span class="c1">// place to chop up the input into tokens</span>
<span class="linenos"> 286</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_token_buffer_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w">                                          </span><span class="c1">// if there was an error allocating the memory</span>
<span class="linenos"> 287</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 288</span><span class="cp">#if defined(__DEBUG_READCOMMANDFROMBUFFER__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 289</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$ERROR: cannot allocate ram for _token_buffer_.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">pgm_read_dword</span><span class="p">(</span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">process_name</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 290</span><span class="cp">#endif</span>
<span class="linenos"> 291</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 292</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 293</span><span class="w">            </span><span class="n">free</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 294</span><span class="w">            </span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 295</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 296</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 297</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 298</span><span class="w">    </span><span class="c1">// end error checking</span>
<span class="linenos"> 299</span>
<span class="linenos"> 300</span><span class="w">    </span><span class="c1">// getTokens parameters</span>
<span class="linenos"> 301</span><span class="w">    </span><span class="n">getTokensParam</span><span class="w"> </span><span class="n">gtprm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 302</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">input_data</span><span class="p">,</span><span class="w">       </span><span class="c1">// input data uint8_t array</span>
<span class="linenos"> 303</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">input_len</span><span class="p">,</span><span class="w">        </span><span class="c1">// input len</span>
<span class="linenos"> 304</span><span class="w">        </span><span class="mi">0</span><span class="p">,</span><span class="w">                     </span><span class="c1">// data_pos</span>
<span class="linenos"> 305</span><span class="w">        </span><span class="n">_token_buffer_</span><span class="p">,</span><span class="w">        </span><span class="c1">// pointer to char array, size of len + 1</span>
<span class="linenos"> 306</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">token_buffer_len</span><span class="p">,</span><span class="w"> </span><span class="c1">// the size of token_buffer</span>
<span class="linenos"> 307</span><span class="w">        </span><span class="mi">0</span><span class="p">,</span><span class="w">                     </span><span class="c1">// token_buffer_index</span>
<span class="linenos"> 308</span><span class="w">        </span><span class="n">_p_num_ptrs_</span><span class="p">,</span><span class="w">          </span><span class="c1">// _data_pointers_[MAX], _data_pointers_index_[MAX]</span>
<span class="linenos"> 309</span><span class="w">        </span><span class="n">_data_pointers_index_</span><span class="p">,</span><span class="w"> </span><span class="c1">// index of token_buffer pointer array</span>
<span class="linenos"> 310</span><span class="w">        </span><span class="n">_data_pointers_</span><span class="p">,</span><span class="w">       </span><span class="c1">// token_buffer pointers</span>
<span class="linenos"> 311</span><span class="w">        </span><span class="nb">true</span><span class="p">,</span><span class="w">                  </span><span class="c1">// point_to_beginning_of_token</span>
<span class="linenos"> 312</span><span class="w">        </span><span class="n">_null_</span><span class="p">,</span><span class="w">                </span><span class="c1">// token_buffer sep char, _null_ == &#39;\0&#39;</span>
<span class="linenos"> 313</span><span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="linenos"> 314</span><span class="w">    </span><span class="c1">// tokenize the input</span>
<span class="linenos"> 315</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserInput</span><span class="o">::</span><span class="n">getTokens</span><span class="p">(</span><span class="n">gtprm</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 316</span><span class="w">    </span><span class="n">_data_pointers_index_max_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="p">;</span><span class="w"> </span><span class="c1">// set index max to tokens received</span>
<span class="linenos"> 317</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w">                    </span><span class="c1">// error condition</span>
<span class="linenos"> 318</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 319</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 320</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 321</span><span class="w">            </span><span class="n">free</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 322</span><span class="w">            </span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 323</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 324</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_token_buffer_</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 325</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 326</span><span class="w">            </span><span class="n">free</span><span class="p">(</span><span class="n">_token_buffer_</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 327</span><span class="w">            </span><span class="n">_token_buffer_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 328</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 329</span><span class="cp">#if defined(__DEBUG_READCOMMANDFROMBUFFER__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 330</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$ERROR: No tokens retrieved.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">pgm_read_dword</span><span class="p">(</span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">process_name</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 331</span><span class="cp">#endif</span>
<span class="linenos"> 332</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 333</span><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="c1">// end error condition</span>
<span class="linenos"> 334</span>
<span class="linenos"> 335</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_commands_head_</span><span class="p">;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">next_command</span><span class="p">)</span><span class="w"> </span><span class="c1">// iterate through CommandConstructor linked-list</span>
<span class="linenos"> 336</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 337</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_compareCommandToString</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"> </span><span class="c1">// compare the root command to the first token</span>
<span class="linenos"> 338</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">match</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 339</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 340</span><span class="w">            </span><span class="k">break</span><span class="p">;</span><span class="w"> </span><span class="c1">// break command iterator for loop</span>
<span class="linenos"> 341</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 342</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_cmd</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">match_all_wcc_cmd</span><span class="p">)</span><span class="w"> </span><span class="c1">// remember first all wcc cmd</span>
<span class="linenos"> 343</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 344</span><span class="w">            </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 345</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 346</span><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="c1">// end root command for loop</span>
<span class="linenos"> 347</span>
<span class="linenos"> 348</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_cmd</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="c1">// if there was not a &quot;match&quot; but we found an all wcc command (this makes all wcc commands lower priority than a regular match)</span>
<span class="linenos"> 349</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 350</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">match_all_wcc_cmd</span><span class="p">;</span><span class="w"> </span><span class="c1">// set result to all wcc</span>
<span class="linenos"> 351</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_cmd</span><span class="p">;</span><span class="w">     </span><span class="c1">// point to the all wcc CommandConstructor</span>
<span class="linenos"> 352</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 353</span>
<span class="linenos"> 354</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">match_all_wcc_cmd</span><span class="p">)</span><span class="w"> </span><span class="c1">// match root command</span>
<span class="linenos"> 355</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 356</span><span class="w">        </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">prm</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">));</span><span class="w"> </span><span class="c1">// move CommandParameters variables from PROGMEM to sram for work</span>
<span class="linenos"> 357</span><span class="w">        </span><span class="n">_current_search_depth_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">                                 </span><span class="c1">// start searching for subcommands at depth 1</span>
<span class="linenos"> 358</span><span class="w">        </span><span class="n">_data_pointers_index_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">                                  </span><span class="c1">// index 1 of _data_pointers_ is the token after the root command</span>
<span class="linenos"> 359</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">command_matched</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w">                                </span><span class="c1">// root command match flag</span>
<span class="linenos"> 360</span><span class="w">        </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">                                 </span><span class="c1">// subcommand error index</span>
<span class="linenos"> 361</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_match</span><span class="p">;</span><span class="w">                                     </span><span class="c1">// UI_COMPARE input/command compare result</span>
<span class="linenos"> 362</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 363</span>
<span class="linenos"> 364</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_launchLogic</span><span class="p">(</span><span class="n">rprm</span><span class="p">);</span><span class="w"> </span><span class="c1">// see if command has any subcommands, validate input types, try to launch function</span>
<span class="linenos"> 365</span><span class="w">    </span><span class="p">}</span><span class="w">                                  </span><span class="c1">// end command logic</span>
<span class="linenos"> 366</span>
<span class="linenos"> 367</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">rprm</span><span class="p">.</span><span class="n">launch_attempted</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">_default_function_</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="c1">// if there was no command match and a default function is configured</span>
<span class="linenos"> 368</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 369</span><span class="cp">#if defined(ENABLE_readCommandFromBufferErrorOutput)</span>
<span class="linenos"> 370</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_readCommandFromBufferErrorOutput</span><span class="p">(</span><span class="n">rprm</span><span class="p">);</span><span class="w"> </span><span class="c1">// error output function</span>
<span class="linenos"> 371</span><span class="cp">#endif                                                      </span><span class="c1">// end ENABLE_readCommandFromBufferErrorOutput</span>
<span class="linenos"> 372</span><span class="w">        </span><span class="p">(</span><span class="o">*</span><span class="n">_default_function_</span><span class="p">)(</span><span class="k">this</span><span class="p">);</span><span class="w"> </span><span class="c1">// run the default function</span>
<span class="linenos"> 373</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 374</span>
<span class="linenos"> 375</span><span class="w">    </span><span class="c1">// cleanup</span>
<span class="linenos"> 376</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">_p_num_ptrs_</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 377</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 378</span><span class="w">        </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"> </span><span class="c1">// reinit _data_pointers_</span>
<span class="linenos"> 379</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 380</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 381</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 382</span><span class="w">        </span><span class="n">free</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 383</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 384</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 385</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_token_buffer_</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 386</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 387</span><span class="w">        </span><span class="n">free</span><span class="p">(</span><span class="n">_token_buffer_</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 388</span><span class="w">        </span><span class="n">_token_buffer_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 389</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 390</span><span class="p">}</span><span class="w"> </span><span class="c1">// end readCommandFromBuffer</span>
<span class="linenos"> 391</span>
<span class="linenos"> 392</span><span class="cp">#if defined(ENABLE_getCommandFromStream)</span>
<span class="linenos"> 393</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::getCommandFromStream</span><span class="p">(</span><span class="n">Stream</span><span class="o">&amp;</span><span class="w"> </span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">rx_buffer_size</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">num_zdc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">CommandParameters</span><span class="o">**</span><span class="w"> </span><span class="n">zdc</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 394</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 395</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">_begin_</span><span class="p">)</span><span class="w"> </span><span class="c1">// error</span>
<span class="linenos"> 396</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 397</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 398</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 399</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_stream_buffer_allocated_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 400</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 401</span><span class="w">        </span><span class="n">_stream_data_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">rx_buffer_size</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">uint8_t</span><span class="p">));</span><span class="w"> </span><span class="c1">// an array to store the received data</span>
<span class="linenos"> 402</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_stream_data_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w">                                         </span><span class="c1">// if there was an error allocating the memory</span>
<span class="linenos"> 403</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 404</span><span class="w">    </span><span class="cp">#if defined(__DEBUG_GETCOMMANDFROMSTREAM__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 405</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$ERROR: _stream_data_ alloc fail</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">pgm_read_dword</span><span class="p">(</span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">process_name</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 406</span><span class="w">    </span><span class="cp">#endif</span>
<span class="linenos"> 407</span><span class="w">            </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 408</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 409</span><span class="w">        </span><span class="n">_stream_buffer_allocated_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 410</span><span class="w">        </span><span class="n">_term_index_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 411</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 412</span><span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">rc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">_stream_data_</span><span class="p">;</span><span class="w"> </span><span class="c1">// point rc to allocated memory</span>
<span class="linenos"> 413</span><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="p">.</span><span class="n">available</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">_new_stream_data_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 414</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 415</span><span class="w">        </span><span class="n">IH_eol</span><span class="w"> </span><span class="n">eol</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 416</span><span class="w">        </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">eol</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">eol_char</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">eol</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 417</span><span class="w">        </span><span class="n">rc</span><span class="p">[</span><span class="n">_stream_data_index_</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stream</span><span class="p">.</span><span class="n">read</span><span class="p">();</span><span class="w"></span>
<span class="linenos"> 418</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rc</span><span class="p">[</span><span class="n">_stream_data_index_</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">eol</span><span class="p">[</span><span class="n">_term_index_</span><span class="p">])</span><span class="w"></span>
<span class="linenos"> 419</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 420</span><span class="w">            </span><span class="n">_stream_data_</span><span class="p">[</span><span class="n">_stream_data_index_</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_null_</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 421</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_term_index_</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">_term_len_</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 422</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 423</span><span class="w">                </span><span class="n">_term_index_</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 424</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 425</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_term_index_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">_term_len_</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 426</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 427</span><span class="w">                </span><span class="n">_new_stream_data_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 428</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 429</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 430</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_stream_data_index_</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">rx_buffer_size</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 431</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 432</span><span class="w">            </span><span class="n">_stream_data_index_</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 433</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 434</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 435</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_new_stream_data_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 436</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 437</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">readCommandFromBuffer</span><span class="p">(</span><span class="n">_stream_data_</span><span class="p">,</span><span class="w"> </span><span class="n">_stream_data_index_</span><span class="p">,</span><span class="w"> </span><span class="n">num_zdc</span><span class="p">,</span><span class="w"> </span><span class="n">zdc</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 438</span><span class="w">        </span><span class="n">_stream_data_index_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 439</span><span class="w">        </span><span class="n">_new_stream_data_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 440</span><span class="w">        </span><span class="n">free</span><span class="p">(</span><span class="n">_stream_data_</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 441</span><span class="w">        </span><span class="n">_stream_buffer_allocated_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 442</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 443</span><span class="p">}</span><span class="w"> </span><span class="c1">// end getCommandFromStream</span>
<span class="linenos"> 444</span><span class="cp">#endif </span><span class="c1">// end ENABLE_getCommandFromStream</span>
<span class="linenos"> 445</span>
<span class="linenos"> 446</span><span class="cp">#if defined(ENABLE_nextArgument)</span>
<span class="linenos"> 447</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="nf">UserInput::nextArgument</span><span class="p">()</span><span class="w"></span>
<span class="linenos"> 448</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 449</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_data_pointers_index_</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">_max_depth_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_max_args_</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">_data_pointers_index_</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">_data_pointers_index_max_</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 450</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 451</span><span class="w">        </span><span class="n">_data_pointers_index_</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 452</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="n">_data_pointers_index_</span><span class="p">];</span><span class="w"></span>
<span class="linenos"> 453</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 454</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"> </span><span class="c1">// else return NULL</span>
<span class="linenos"> 455</span><span class="p">}</span><span class="w"> </span><span class="c1">// end nextArgument</span>
<span class="linenos"> 456</span><span class="cp">#endif </span><span class="c1">// end ENABLE_nextArgument</span>
<span class="linenos"> 457</span>
<span class="linenos"> 458</span><span class="cp">#if defined(ENABLE_getArgument)</span>
<span class="linenos"> 459</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="nf">UserInput::getArgument</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">argument_number</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 460</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 461</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">argument_number</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">_max_depth_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_max_args_</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">argument_number</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">_data_pointers_index_max_</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 462</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 463</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="n">argument_number</span><span class="p">];</span><span class="w"></span>
<span class="linenos"> 464</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 465</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"> </span><span class="c1">// else return NULL</span>
<span class="linenos"> 466</span><span class="p">}</span><span class="w"> </span><span class="c1">// end getArgument</span>
<span class="linenos"> 467</span><span class="cp">#endif </span><span class="c1">// end ENABLE_getArgument</span>
<span class="linenos"> 468</span>
<span class="linenos"> 469</span><span class="cp">#if defined(ENABLE_outputIsAvailable)</span>
<span class="linenos"> 470</span><span class="kt">size_t</span><span class="w"> </span><span class="nf">UserInput::outputIsAvailable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">_output_buffer_len_</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_output_buffer_bytes_left_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// end outputIsAvailable</span>
<span class="linenos"> 471</span><span class="cp">#endif                                                                                             </span><span class="c1">// end ENABLE_outputIsAvailable</span>
<span class="linenos"> 472</span>
<span class="linenos"> 473</span><span class="cp">#if defined(ENABLE_outputIsEnabled)</span>
<span class="linenos"> 474</span><span class="kr">inline</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">UserInput::outputIsEnabled</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">_output_enabled_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// end outputIsEnabled</span>
<span class="linenos"> 475</span><span class="cp">#endif                                                                </span><span class="c1">// end ENABLE_outputIsEnabled</span>
<span class="linenos"> 476</span>
<span class="linenos"> 477</span><span class="cp">#if defined(ENABLE_outputToStream)</span>
<span class="linenos"> 478</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::outputToStream</span><span class="p">(</span><span class="n">Stream</span><span class="o">&amp;</span><span class="w"> </span><span class="n">stream</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 479</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 480</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_output_flag_</span><span class="p">)</span><span class="w"> </span><span class="c1">// if there&#39;s something to print</span>
<span class="linenos"> 481</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 482</span><span class="w">        </span><span class="n">stream</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">_output_buffer_</span><span class="p">);</span><span class="w"> </span><span class="c1">// print output_buffer, which is formatted into a string by UserInput&#39;s methods</span>
<span class="linenos"> 483</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">clearOutputBuffer</span><span class="p">();</span><span class="w"></span>
<span class="linenos"> 484</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 485</span><span class="p">}</span><span class="w"> </span><span class="c1">// end outputToStream</span>
<span class="linenos"> 486</span><span class="cp">#endif </span><span class="c1">// end ENABLE_outputToStream</span>
<span class="linenos"> 487</span>
<span class="linenos"> 488</span><span class="cp">#if defined(ENABLE_clearOutputBuffer)</span>
<span class="linenos"> 489</span><span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::clearOutputBuffer</span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="n">overwrite_contents</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 490</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 491</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_output_enabled_</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 492</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 493</span><span class="w">        </span><span class="n">_output_buffer_bytes_left_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_output_buffer_len_</span><span class="p">;</span><span class="w"> </span><span class="c1">//  reset output_buffer&#39;s index</span>
<span class="linenos"> 494</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">overwrite_contents</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 495</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 496</span><span class="w">            </span><span class="n">_output_buffer_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_null_</span><span class="p">;</span><span class="w"> </span><span class="c1">// soft reinit _output_buffer_</span>
<span class="linenos"> 497</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 498</span><span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="linenos"> 499</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 500</span><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">_output_buffer_len_</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 501</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 502</span><span class="w">                </span><span class="n">_output_buffer_</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_null_</span><span class="p">;</span><span class="w"> </span><span class="c1">// overwrite buffer contents</span>
<span class="linenos"> 503</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 504</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 505</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 506</span><span class="w">    </span><span class="n">_output_flag_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 507</span><span class="p">}</span><span class="w"> </span><span class="c1">// end clearOutputBuffer</span>
<span class="linenos"> 508</span><span class="cp">#endif </span><span class="c1">// end ENABLE_clearOutputBuffer</span>
<span class="linenos"> 509</span>
<span class="linenos"> 510</span><span class="kt">size_t</span><span class="w"> </span><span class="nf">UserInput::getTokens</span><span class="p">(</span><span class="n">getTokensParam</span><span class="o">&amp;</span><span class="w"> </span><span class="n">gtprm</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">InputProcessParameters</span><span class="o">&amp;</span><span class="w"> </span><span class="n">input_prm</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 511</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 512</span><span class="w">    </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// and the token pointer index to zero</span>
<span class="linenos"> 513</span>
<span class="linenos"> 514</span><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">len</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 515</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 516</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_getTokensDelimiters</span><span class="p">(</span><span class="n">gtprm</span><span class="p">,</span><span class="w"> </span><span class="n">input_prm</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 517</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_getTokensStartStop</span><span class="p">(</span><span class="n">gtprm</span><span class="p">,</span><span class="w"> </span><span class="n">input_prm</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 518</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_getTokensChar</span><span class="p">(</span><span class="n">gtprm</span><span class="p">,</span><span class="w"> </span><span class="n">input_prm</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 519</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 520</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 521</span><span class="p">}</span><span class="w"> </span><span class="c1">// end getTokens</span>
<span class="linenos"> 522</span>
<span class="linenos"> 523</span><span class="kr">inline</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">UserInput::validateNullSepInput</span><span class="p">(</span><span class="n">validateNullSepInputParam</span><span class="o">&amp;</span><span class="w"> </span><span class="n">vprm</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 524</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 525</span><span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">strlen_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointers</span><span class="p">[</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">]);</span><span class="w"></span>
<span class="linenos"> 526</span><span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="kt">char</span><span class="p">)</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointers</span><span class="p">[</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">vprm</span><span class="p">.</span><span class="n">neg_sign</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 527</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">arg_type</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">UITYPE</span><span class="o">::</span><span class="n">FLOAT</span><span class="p">)</span><span class="w"> </span><span class="c1">// for unsigned integers, integers, and floating point numbers</span>
<span class="linenos"> 528</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 529</span><span class="w">        </span><span class="kt">size_t</span><span class="w"> </span><span class="n">found_dot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 530</span><span class="w">        </span><span class="kt">size_t</span><span class="w"> </span><span class="n">num_digits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 531</span><span class="w">        </span><span class="kt">size_t</span><span class="w"> </span><span class="n">not_digits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 532</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">arg_type</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">UITYPE</span><span class="o">::</span><span class="n">INT16_T</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// error</span>
<span class="linenos"> 533</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 534</span><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// uint cannot be negative</span>
<span class="linenos"> 535</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 536</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">strlen_data</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">j</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 537</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 538</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointers</span><span class="p">[</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">vprm</span><span class="p">.</span><span class="n">float_sep</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 539</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 540</span><span class="w">                </span><span class="n">found_dot</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 541</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 542</span><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">isdigit</span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointers</span><span class="p">[</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">][</span><span class="n">j</span><span class="p">])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 543</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 544</span><span class="w">                </span><span class="n">num_digits</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 545</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 546</span><span class="w">            </span><span class="k">else</span><span class="w"></span>
<span class="linenos"> 547</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 548</span><span class="w">                </span><span class="n">not_digits</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 549</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 550</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 551</span><span class="w">        </span><span class="c1">// int/uint error test</span>
<span class="linenos"> 552</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">arg_type</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">UITYPE</span><span class="o">::</span><span class="n">INT16_T</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">found_dot</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0U</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">not_digits</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0U</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">num_digits</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">start</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">strlen_data</span><span class="p">))</span><span class="w"></span>
<span class="linenos"> 553</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 554</span><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 555</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 556</span><span class="w">        </span><span class="c1">// float error test</span>
<span class="linenos"> 557</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">arg_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UITYPE</span><span class="o">::</span><span class="n">FLOAT</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">found_dot</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1U</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">not_digits</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0U</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">(</span><span class="n">num_digits</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">found_dot</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">start</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">strlen_data</span><span class="p">))</span><span class="w"></span>
<span class="linenos"> 558</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 559</span><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 560</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 561</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"> </span><span class="c1">// no errors</span>
<span class="linenos"> 562</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 563</span>
<span class="linenos"> 564</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">arg_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UITYPE</span><span class="o">::</span><span class="n">CHAR</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">vprm</span><span class="p">.</span><span class="n">arg_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UITYPE</span><span class="o">::</span><span class="n">START_STOP</span><span class="p">)</span><span class="w"> </span><span class="c1">// char and start/stop</span>
<span class="linenos"> 565</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 566</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">arg_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UITYPE</span><span class="o">::</span><span class="n">CHAR</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">strlen_data</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// error</span>
<span class="linenos"> 567</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 568</span><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// looking for a single char value, not a c-string</span>
<span class="linenos"> 569</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 570</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">strlen_data</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">j</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 571</span><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="c1">// if we encounter anything that isn&#39;t one of these four things, something isn&#39;t right</span>
<span class="linenos"> 572</span><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">test_bool</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">isprint</span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointers</span><span class="p">[</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">][</span><span class="n">j</span><span class="p">]),</span><span class="w"> </span><span class="n">ispunct</span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointers</span><span class="p">[</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">][</span><span class="n">j</span><span class="p">]),</span><span class="w"></span>
<span class="linenos"> 573</span><span class="w">                </span><span class="n">iscntrl</span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointers</span><span class="p">[</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">][</span><span class="n">j</span><span class="p">]),</span><span class="w"> </span><span class="n">isdigit</span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointers</span><span class="p">[</span><span class="n">vprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">][</span><span class="n">j</span><span class="p">])};</span><span class="w"></span>
<span class="linenos"> 574</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">test_bool</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">test_bool</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">test_bool</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">test_bool</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// no match</span>
<span class="linenos"> 575</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 576</span><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 577</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 578</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 579</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 580</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 581</span>
<span class="linenos"> 582</span><span class="w">    </span><span class="c1">// no type specified</span>
<span class="linenos"> 583</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">vprm</span><span class="p">.</span><span class="n">arg_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UITYPE</span><span class="o">::</span><span class="n">NOTYPE</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 584</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 585</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"> </span><span class="c1">// no type validation performed</span>
<span class="linenos"> 586</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 587</span>
<span class="linenos"> 588</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// error, unknown type</span>
<span class="linenos"> 589</span><span class="p">}</span><span class="w"> </span><span class="c1">// end validateNullSepInput</span>
<span class="linenos"> 590</span>
<span class="linenos"> 591</span><span class="cm">/*</span>
<span class="linenos"> 592</span><span class="cm">    private methods</span>
<span class="linenos"> 593</span><span class="cm">*/</span><span class="w"></span>
<span class="linenos"> 594</span><span class="cp">#if defined(ENABLE_ui_out)</span>
<span class="linenos"> 595</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::_ui_out</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">fmt</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span><span class="w"></span>
<span class="linenos"> 596</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 597</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_output_enabled_</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 598</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 599</span><span class="w">        </span><span class="kt">va_list</span><span class="w"> </span><span class="n">args</span><span class="p">;</span><span class="w">        </span><span class="c1">// ... parameter pack list</span>
<span class="linenos"> 600</span><span class="w">        </span><span class="n">va_start</span><span class="p">(</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="n">fmt</span><span class="p">);</span><span class="w"> </span><span class="c1">// set the parameter pack list index here</span>
<span class="linenos"> 601</span><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vsnprintf_P</span><span class="p">(</span><span class="n">_output_buffer_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">abs</span><span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">_output_buffer_bytes_left_</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">_output_buffer_len_</span><span class="p">),</span><span class="w"> </span><span class="n">_output_buffer_bytes_left_</span><span class="p">,</span><span class="w"> </span><span class="n">fmt</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 602</span><span class="w">        </span><span class="n">va_end</span><span class="p">(</span><span class="n">args</span><span class="p">);</span><span class="w">                               </span><span class="c1">// we are done with the parameter pack</span>
<span class="linenos"> 603</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">err</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="kt">long</span><span class="p">)</span><span class="n">_output_buffer_bytes_left_</span><span class="p">)</span><span class="w"> </span><span class="c1">// overflow condition</span>
<span class="linenos"> 604</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 605</span><span class="w">            </span><span class="c1">// attempt warn</span>
<span class="linenos"> 606</span><span class="w">            </span><span class="n">snprintf_P</span><span class="p">(</span><span class="n">_output_buffer_</span><span class="p">,</span><span class="w"> </span><span class="n">_output_buffer_len_</span><span class="p">,</span><span class="w"> </span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;Increase output buffer to %d bytes.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="n">abs</span><span class="p">(</span><span class="n">err</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">_output_buffer_bytes_left_</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">_output_buffer_len_</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 607</span><span class="w">            </span><span class="n">_output_flag_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 608</span><span class="w">            </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 609</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 610</span><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">err</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// encoding error</span>
<span class="linenos"> 611</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 612</span><span class="w">            </span><span class="c1">// attempt warn</span>
<span class="linenos"> 613</span><span class="w">            </span><span class="n">snprintf_P</span><span class="p">(</span><span class="n">_output_buffer_</span><span class="p">,</span><span class="w"> </span><span class="n">_output_buffer_len_</span><span class="p">,</span><span class="w"> </span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;Encoding error.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 614</span><span class="w">            </span><span class="n">_output_flag_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 615</span><span class="w">            </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 616</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 617</span><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="c1">// normal condition</span>
<span class="linenos"> 618</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 619</span><span class="w">            </span><span class="n">_output_buffer_bytes_left_</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">err</span><span class="p">;</span><span class="w"> </span><span class="c1">// decrement amount of bytes left in buffer</span>
<span class="linenos"> 620</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 621</span><span class="w">        </span><span class="n">_output_flag_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"> </span><span class="c1">// output is available</span>
<span class="linenos"> 622</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 623</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _ui_out</span>
<span class="linenos"> 624</span><span class="cp">#endif</span>
<span class="linenos"> 625</span>
<span class="linenos"> 626</span><span class="cp">#if defined(ENABLE_readCommandFromBufferErrorOutput) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 627</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::_readCommandFromBufferErrorOutput</span><span class="p">(</span><span class="n">_rcfbprm</span><span class="o">&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 628</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 629</span><span class="w">    </span><span class="cp">#if defined(UI_VERBOSE)</span>
<span class="linenos"> 630</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_output_enabled_</span><span class="p">)</span><span class="w"> </span><span class="c1">// format a string with useful information</span>
<span class="linenos"> 631</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 632</span><span class="w">        </span><span class="n">IH_pname</span><span class="w"> </span><span class="n">process_name</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 633</span><span class="w">        </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">process_name</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 634</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$Invalid input: &quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 635</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">command_matched</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 636</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 637</span><span class="w">            </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">prm</span><span class="p">[</span><span class="n">_failed_on_subcommand_</span><span class="p">]),</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">));</span><span class="w"> </span><span class="c1">// only load if a command matched</span>
<span class="linenos"> 638</span><span class="w">            </span><span class="c1">// constrain err_n_args to UI_MAX_ARGS + 1</span>
<span class="linenos"> 639</span><span class="w">            </span><span class="kt">size_t</span><span class="w"> </span><span class="n">err_n_args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">_data_pointers_index_max_</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1U</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">UI_MAX_ARGS_PER_COMMAND</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">(</span><span class="n">UI_MAX_ARGS_PER_COMMAND</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 640</span><span class="w">                                                                                                                            </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">_data_pointers_index_max_</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1U</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 641</span><span class="w">            </span><span class="n">err_n_args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">err_n_args</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">num_args</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">err_n_args</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 642</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">err_n_args</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 643</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 644</span><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">);</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 645</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 646</span><span class="w">                    </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;%s &quot;</span><span class="p">),</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"> </span><span class="c1">// add subcommands to echo</span>
<span class="linenos"> 647</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 648</span><span class="w">                </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 649</span><span class="w">                </span><span class="kt">bool</span><span class="w"> </span><span class="n">print_subcmd_err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 650</span><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 651</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 652</span><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_input_type_match_flags_</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 653</span><span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 654</span><span class="w">                        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="p">)</span><span class="n">UserInput</span><span class="o">::</span><span class="n">_getArgType</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 655</span><span class="w">                        </span><span class="kt">char</span><span class="w"> </span><span class="n">_type_char_array</span><span class="p">[</span><span class="n">UI_INPUT_TYPE_STRINGS_PGM_LEN</span><span class="p">];</span><span class="w"></span>
<span class="linenos"> 656</span><span class="w">                        </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">_type_char_array</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ihconst</span><span class="o">::</span><span class="n">type_strings</span><span class="p">[</span><span class="n">_type</span><span class="p">],</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">_type_char_array</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 657</span><span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">UITYPE</span><span class="p">)</span><span class="n">_type</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">UITYPE</span><span class="o">::</span><span class="n">NO_ARGS</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 658</span><span class="w">                        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 659</span><span class="w">                            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot; &#39;INPUT NOT RECEIVED&#39;*(%s REQUIRED)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">_type_char_array</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 660</span><span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 661</span><span class="w">                        </span><span class="k">else</span><span class="w"></span>
<span class="linenos"> 662</span><span class="w">                        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 663</span><span class="w">                            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">sub_commands</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">print_subcmd_err</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 664</span><span class="w">                            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 665</span><span class="w">                                </span><span class="n">print_subcmd_err</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 666</span><span class="w">                                </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot; &#39;%s&#39;*(ENTER VALID SUBCOMMAND)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="linenos"> 667</span><span class="w">                            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 668</span><span class="w">                            </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">sub_commands</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">err_n_args</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">UITYPE</span><span class="p">)</span><span class="n">_type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UITYPE</span><span class="o">::</span><span class="n">NO_ARGS</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 669</span><span class="w">                            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 670</span><span class="w">                                </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot; &#39;%s&#39;*(LEAVE BLANK)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="linenos"> 671</span><span class="w">                            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 672</span><span class="w">                            </span><span class="k">else</span><span class="w"></span>
<span class="linenos"> 673</span><span class="w">                            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 674</span><span class="w">                                </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot; &#39;%s&#39;*(%s)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">_type_char_array</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 675</span><span class="w">                            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 676</span><span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 677</span><span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 678</span><span class="w">                    </span><span class="k">else</span><span class="w"></span>
<span class="linenos"> 679</span><span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 680</span><span class="w">                        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot; &#39;&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 681</span><span class="w">                        </span><span class="kt">size_t</span><span class="w"> </span><span class="n">strlen_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">_data_pointers_</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="linenos"> 682</span><span class="w">                        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">strlen_data</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">j</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 683</span><span class="w">                        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 684</span><span class="w">                            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">iscntrl</span><span class="p">(</span><span class="n">_data_pointers_</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]))</span><span class="w"> </span><span class="c1">// format buffer with escaped char</span>
<span class="linenos"> 685</span><span class="w">                            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 686</span><span class="w">                                </span><span class="kt">char</span><span class="w"> </span><span class="n">buf</span><span class="p">[</span><span class="n">UI_ESCAPED_CHAR_STRLEN</span><span class="p">]</span><span class="w"> </span><span class="p">{};</span><span class="w"></span>
<span class="linenos"> 687</span><span class="w">                                </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_escapeCharactersSoTheyPrint</span><span class="p">(</span><span class="n">_data_pointers_</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span><span class="w"> </span><span class="n">buf</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 688</span><span class="w">                            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 689</span><span class="w">                            </span><span class="k">else</span><span class="w"></span>
<span class="linenos"> 690</span><span class="w">                            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 691</span><span class="w">                                </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;%c&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span><span class="w"> </span><span class="c1">// single char</span>
<span class="linenos"> 692</span><span class="w">                            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 693</span><span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 694</span><span class="w">                        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&#39;(OK)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 695</span><span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 696</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 697</span><span class="w">                </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 698</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 699</span><span class="w">    </span><span class="cp">#endif </span><span class="c1">// end UI_VERBOSE</span>
<span class="linenos"> 700</span><span class="w">           </span><span class="c1">// this is the library output with UI_ECHO_ONLY defined</span>
<span class="linenos"> 701</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">rprm</span><span class="p">.</span><span class="n">input_data</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 702</span><span class="w">    </span><span class="cp">#if defined(UI_VERBOSE)</span>
<span class="linenos"> 703</span><span class="w">            </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 704</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 705</span><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="c1">// command not matched</span>
<span class="linenos"> 706</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 707</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s"> command &lt;%s&gt; unknown</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">rprm</span><span class="p">.</span><span class="n">input_data</span><span class="p">,</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="linenos"> 708</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 709</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 710</span><span class="w">    </span><span class="cp">#endif </span><span class="c1">// end UI_VERBOSE</span>
<span class="linenos"> 711</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _readCommandFromBufferErrorOutput</span>
<span class="linenos"> 712</span><span class="cp">#endif </span><span class="c1">// end ENABLE_readCommandFromBufferErrorOutput</span>
<span class="linenos"> 713</span>
<span class="linenos"> 714</span><span class="c1">// clang-format off</span>
<span class="linenos"> 715</span><span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::_launchFunction</span><span class="p">(</span><span class="n">_rcfbprm</span><span class="o">&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">IH_pname</span><span class="o">&amp;</span><span class="w"> </span><span class="n">process_name</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 716</span><span class="p">{</span><span class="w">   </span>
<span class="linenos"> 717</span><span class="w">    </span><span class="cp">#if defined(UI_VERBOSE)</span>
<span class="linenos"> 718</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_output_enabled_</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 719</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 720</span><span class="w">        </span><span class="cp">#if defined(ENABLE_ui_out)</span>
<span class="linenos"> 721</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 722</span><span class="w">        </span><span class="cp">#endif</span>
<span class="linenos"> 723</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">_data_pointers_index_max_</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 724</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 725</span><span class="w">            </span><span class="kt">size_t</span><span class="w"> </span><span class="n">strlen_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">_data_pointers_</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span><span class="w"></span>
<span class="linenos"> 726</span><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">strlen_data</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">j</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 727</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 728</span><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">iscntrl</span><span class="p">(</span><span class="n">_data_pointers_</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]))</span><span class="w"> </span><span class="c1">// format buffer with escaped char</span>
<span class="linenos"> 729</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 730</span><span class="w">                    </span><span class="kt">char</span><span class="w"> </span><span class="n">buf</span><span class="p">[</span><span class="n">UI_ESCAPED_CHAR_STRLEN</span><span class="p">]</span><span class="w"> </span><span class="p">{};</span><span class="w"></span>
<span class="linenos"> 731</span><span class="w">                    </span><span class="cp">#if defined(ENABLE_ui_out)</span>
<span class="linenos"> 732</span><span class="w">                    </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_escapeCharactersSoTheyPrint</span><span class="p">(</span><span class="n">_data_pointers_</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">],</span><span class="w"> </span><span class="n">buf</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 733</span><span class="w">                    </span><span class="cp">#endif</span>
<span class="linenos"> 734</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 735</span><span class="w">                </span><span class="k">else</span><span class="w"></span>
<span class="linenos"> 736</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 737</span><span class="w">                    </span><span class="cp">#if defined(ENABLE_ui_out)</span>
<span class="linenos"> 738</span><span class="w">                    </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;%c&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span><span class="w"> </span><span class="c1">// single char</span>
<span class="linenos"> 739</span><span class="w">                    </span><span class="cp">#endif</span>
<span class="linenos"> 740</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 741</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 742</span><span class="w">            </span><span class="cp">#if defined(ENABLE_ui_out)</span>
<span class="linenos"> 743</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">));</span><span class="w"> </span><span class="c1">// add a space</span>
<span class="linenos"> 744</span><span class="w">            </span><span class="cp">#endif</span>
<span class="linenos"> 745</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 746</span><span class="w">        </span><span class="cp">#if defined(ENABLE_ui_out)</span>
<span class="linenos"> 747</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 748</span><span class="w">        </span><span class="cp">#endif</span>
<span class="linenos"> 749</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 750</span><span class="w">    </span><span class="cp">#endif </span><span class="c1">// UI_VERBOSE</span>
<span class="linenos"> 751</span><span class="w">    </span><span class="n">_data_pointers_index_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_current_search_depth_</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 752</span>
<span class="linenos"> 753</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">function</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 754</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 755</span><span class="w">        </span><span class="cp">#if defined(__DEBUG_LAUNCH_FUNCTION__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 756</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$_launchFunction: launch command_id %u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">command_id</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 757</span><span class="w">        </span><span class="cp">#endif</span>
<span class="linenos"> 758</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">function</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 759</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 760</span><span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="linenos"> 761</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 762</span><span class="w">        </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">prm</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 763</span><span class="w">        </span><span class="cp">#if defined(__DEBUG_LAUNCH_FUNCTION__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 764</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$_launchFunction: launch command_id %u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">command_id</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 765</span><span class="w">        </span><span class="cp">#endif</span>
<span class="linenos"> 766</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">function</span><span class="p">(</span><span class="k">this</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 767</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 768</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _launchFunction</span>
<span class="linenos"> 769</span>
<span class="linenos"> 770</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::_launchLogic</span><span class="p">(</span><span class="n">_rcfbprm</span><span class="o">&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 771</span><span class="p">{</span><span class="w">    </span>
<span class="linenos"> 772</span><span class="w">    </span><span class="n">IH_pname</span><span class="w"> </span><span class="n">process_name</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 773</span><span class="w">    </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">process_name</span><span class="p">));</span><span class="w">        </span>
<span class="linenos"> 774</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">sub_commands</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// error</span>
<span class="linenos"> 775</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 776</span><span class="w">        </span><span class="cp">#if defined(__DEBUG_LAUNCH_LOGIC__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 777</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$launchLogic: too many tokens for command_id %u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">command_id</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 778</span><span class="w">        </span><span class="cp">#endif</span>
<span class="linenos"> 779</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 780</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 781</span>
<span class="linenos"> 782</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">subcommand_matched</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// command with no arguments</span>
<span class="linenos"> 783</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 784</span><span class="w">        </span><span class="cp">#if defined(__DEBUG_LAUNCH_LOGIC__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 785</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$launchLogic: launchFunction command_id %u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">command_id</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 786</span><span class="w">        </span><span class="cp">#endif</span>
<span class="linenos"> 787</span>
<span class="linenos"> 788</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">launch_attempted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"> </span><span class="c1">// don&#39;t run default callback</span>
<span class="linenos"> 789</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_launchFunction</span><span class="p">(</span><span class="n">rprm</span><span class="p">,</span><span class="w"> </span><span class="n">process_name</span><span class="p">);</span><span class="w"> </span><span class="c1">// launch the matched command</span>
<span class="linenos"> 790</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 791</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 792</span>
<span class="linenos"> 793</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">_current_search_depth_</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">subcommand_matched</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// subcommand with no arguments</span>
<span class="linenos"> 794</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 795</span><span class="w">        </span><span class="cp">#if defined(__DEBUG_LAUNCH_LOGIC__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 796</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$launchLogic: launchFunction command_id %u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">command_id</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 797</span><span class="w">        </span><span class="cp">#endif</span>
<span class="linenos"> 798</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">launch_attempted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w">                                                      </span><span class="c1">// don&#39;t run default callback</span>
<span class="linenos"> 799</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_launchFunction</span><span class="p">(</span><span class="n">rprm</span><span class="p">,</span><span class="w"> </span><span class="n">process_name</span><span class="p">);</span><span class="w"> </span><span class="c1">// launch the matched command</span>
<span class="linenos"> 800</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 801</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 802</span>
<span class="linenos"> 803</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">subcommand_matched</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// command with arguments, potentially has subcommands but none were entered</span>
<span class="linenos"> 804</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 805</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_getArgs</span><span class="p">(</span><span class="n">rprm</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 806</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_rec_num_arg_strings_</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">num_args</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">_rec_num_arg_strings_</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_arguments_valid</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 807</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 808</span><span class="w">            </span><span class="cp">#if defined(__DEBUG_LAUNCH_LOGIC__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 809</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$launchLogic: launchFunction command_id %u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">command_id</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 810</span><span class="w">            </span><span class="cp">#endif</span>
<span class="linenos"> 811</span><span class="w">            </span><span class="n">rprm</span><span class="p">.</span><span class="n">launch_attempted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w">                                                      </span><span class="c1">// don&#39;t run default callback</span>
<span class="linenos"> 812</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_launchFunction</span><span class="p">(</span><span class="n">rprm</span><span class="p">,</span><span class="w"> </span><span class="n">process_name</span><span class="p">);</span><span class="w"> </span><span class="c1">// launch the matched command</span>
<span class="linenos"> 813</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 814</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"> </span><span class="c1">// if !match, error</span>
<span class="linenos"> 815</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 816</span><span class="w">    </span>
<span class="linenos"> 817</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_current_search_depth_</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">depth</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">sub_commands</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// command with arguments (max depth)</span>
<span class="linenos"> 818</span><span class="w">    </span><span class="p">{</span><span class="w">        </span>
<span class="linenos"> 819</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_getArgs</span><span class="p">(</span><span class="n">rprm</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 820</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_rec_num_arg_strings_</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">num_args</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">_rec_num_arg_strings_</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_arguments_valid</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="c1">// if we received at least min and less than max arguments and they are valid</span>
<span class="linenos"> 821</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 822</span><span class="w">            </span><span class="cp">#if defined(__DEBUG_LAUNCH_LOGIC__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 823</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$launchLogic: launchFunction command_id %u</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">command_id</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 824</span><span class="w">            </span><span class="cp">#endif</span>
<span class="linenos"> 825</span><span class="w">            </span><span class="n">rprm</span><span class="p">.</span><span class="n">launch_attempted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w">                                                      </span><span class="c1">// don&#39;t run default callback</span>
<span class="linenos"> 826</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_launchFunction</span><span class="p">(</span><span class="n">rprm</span><span class="p">,</span><span class="w"> </span><span class="n">process_name</span><span class="p">);</span><span class="w"> </span><span class="c1">// launch the matched command</span>
<span class="linenos"> 827</span><span class="w">        </span><span class="p">}</span><span class="w">        </span>
<span class="linenos"> 828</span><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w"> </span><span class="c1">// if !match, error</span>
<span class="linenos"> 829</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 830</span>
<span class="linenos"> 831</span><span class="w">    </span><span class="c1">// subcommand search</span>
<span class="linenos"> 832</span><span class="w">    </span><span class="n">rprm</span><span class="p">.</span><span class="n">subcommand_matched</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w">       </span>
<span class="linenos"> 833</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_current_search_depth_</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">tree_depth</span><span class="p">))</span><span class="w">             </span><span class="c1">// dig starting at depth 1</span>
<span class="linenos"> 834</span><span class="w">    </span><span class="p">{</span><span class="w">                                                                  </span><span class="c1">// this index starts at one because the parameter array&#39;s first element will be the root command        </span>
<span class="linenos"> 835</span><span class="w">        </span><span class="cp">#if defined(__DEBUG_SUBCOMMAND_SEARCH__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 836</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$launchLogic: search depth (%d)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">_current_search_depth_</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 837</span><span class="w">        </span><span class="cp">#endif</span>
<span class="linenos"> 838</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_match</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 839</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 840</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 841</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">        </span>
<span class="linenos"> 842</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">param_array_len</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">);</span><span class="w"> </span><span class="o">++</span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="c1">// through the parameter array</span>
<span class="linenos"> 843</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 844</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// pointer index protection</span>
<span class="linenos"> 845</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 846</span><span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 847</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 848</span><span class="w">            </span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_compareCommandToString</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="p">,</span><span class="w"> </span><span class="n">j</span><span class="p">,</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">[</span><span class="n">_data_pointers_index_</span><span class="p">]);</span><span class="w"></span>
<span class="linenos"> 849</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">match</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 850</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 851</span><span class="w">                </span><span class="n">rprm</span><span class="p">.</span><span class="n">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 852</span><span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"> </span><span class="c1">// break command iterator for loop</span>
<span class="linenos"> 853</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 854</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_cmd</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">match_all_wcc_cmd</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 855</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 856</span><span class="w">                </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 857</span><span class="w">                </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 858</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 859</span><span class="w">        </span><span class="p">}</span><span class="w">        </span>
<span class="linenos"> 860</span>
<span class="linenos"> 861</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_cmd</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 862</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 863</span><span class="w">            </span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">match_all_wcc_cmd</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 864</span><span class="w">            </span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_cmd</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 865</span><span class="w">            </span><span class="n">rprm</span><span class="p">.</span><span class="n">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_wcc_idx</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 866</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 867</span><span class="w">            </span>
<span class="linenos"> 868</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">result</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">match_all_wcc_cmd</span><span class="p">)</span><span class="w"> </span><span class="c1">// match subcommand string</span>
<span class="linenos"> 869</span><span class="w">        </span><span class="p">{</span><span class="w">                </span>
<span class="linenos"> 870</span><span class="w">            </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">prm</span><span class="p">[</span><span class="n">rprm</span><span class="p">.</span><span class="n">idx</span><span class="p">]),</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 871</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">depth</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">_current_search_depth_</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">parent_command_id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">command_id</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 872</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 873</span><span class="w">                </span><span class="cp">#if defined(__DEBUG_SUBCOMMAND_SEARCH__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 874</span><span class="w">                </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$launchLogic: subcommand (%s) match, command_id (%u), (%d) subcommands, max_num_args (%d)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">command_id</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">sub_commands</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 875</span><span class="w">                </span><span class="cp">#endif</span>
<span class="linenos"> 876</span><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// subcommand matched</span>
<span class="linenos"> 877</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 878</span><span class="w">                    </span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="o">--</span><span class="p">;</span><span class="w"> </span><span class="c1">// subtract subcommand from tokens received</span>
<span class="linenos"> 879</span><span class="w">                    </span><span class="n">_data_pointers_index_</span><span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="c1">// increment to the next token</span>
<span class="linenos"> 880</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 881</span><span class="w">                </span><span class="n">rprm</span><span class="p">.</span><span class="n">command_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">command_id</span><span class="p">;</span><span class="w"> </span><span class="c1">// set command_id to matched subcommand</span>
<span class="linenos"> 882</span><span class="w">                </span><span class="n">rprm</span><span class="p">.</span><span class="n">subcommand_matched</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w">         </span><span class="c1">// subcommand matched</span>
<span class="linenos"> 883</span><span class="w">                </span><span class="n">_failed_on_subcommand_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">idx</span><span class="p">;</span><span class="w">      </span><span class="c1">// set error index                </span>
<span class="linenos"> 884</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 885</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 886</span><span class="w">        </span>
<span class="linenos"> 887</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_current_search_depth_</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">tree_depth</span><span class="p">))</span><span class="w"></span>
<span class="linenos"> 888</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 889</span><span class="w">            </span><span class="n">_current_search_depth_</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 890</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 891</span><span class="w">    </span><span class="p">}</span><span class="w">                                     </span><span class="c1">// end subcommand search</span>
<span class="linenos"> 892</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">subcommand_matched</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="c1">// recursion</span>
<span class="linenos"> 893</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 894</span><span class="w">        </span><span class="cp">#if defined(__DEBUG_SUBCOMMAND_SEARCH__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos"> 895</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$launchLogic: launchLogic recurse, command_id (%u)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">process_name</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">.</span><span class="n">command_id</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 896</span><span class="w">        </span><span class="cp">#endif</span>
<span class="linenos"> 897</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_launchLogic</span><span class="p">(</span><span class="n">rprm</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 898</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 899</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _launchLogic</span>
<span class="linenos"> 900</span>
<span class="linenos"> 901</span><span class="kr">inline</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="nf">UserInput::_escapeCharactersSoTheyPrint</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buf</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 902</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 903</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">input</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="mi">32</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="mi">34</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 904</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 905</span><span class="w">        </span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="mi">92</span><span class="p">;</span><span class="w"> </span><span class="c1">// (char)92 == &#39;\\&#39;</span>
<span class="linenos"> 906</span><span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 907</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 908</span><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="no">char</span><span class="p">)</span><span class="sc">&#39;\0&#39;</span><span class="p">:{</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;0&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;}</span><span class="w"></span>
<span class="linenos"> 909</span><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="no">char</span><span class="p">)</span><span class="sc">&#39;\a&#39;</span><span class="p">:{</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;a&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;}</span><span class="w"></span>
<span class="linenos"> 910</span><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="no">char</span><span class="p">)</span><span class="sc">&#39;\b&#39;</span><span class="p">:{</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;b&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;}</span><span class="w"></span>
<span class="linenos"> 911</span><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="no">char</span><span class="p">)</span><span class="sc">&#39;\t&#39;</span><span class="p">:{</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;t&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;}</span><span class="w"></span>
<span class="linenos"> 912</span><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="no">char</span><span class="p">)</span><span class="sc">&#39;\n&#39;</span><span class="p">:{</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;n&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;}</span><span class="w"></span>
<span class="linenos"> 913</span><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="no">char</span><span class="p">)</span><span class="sc">&#39;\v&#39;</span><span class="p">:{</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;v&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;}</span><span class="w"></span>
<span class="linenos"> 914</span><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="no">char</span><span class="p">)</span><span class="sc">&#39;\f&#39;</span><span class="p">:{</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;f&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;}</span><span class="w"></span>
<span class="linenos"> 915</span><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="no">char</span><span class="p">)</span><span class="sc">&#39;\r&#39;</span><span class="p">:{</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;r&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;}</span><span class="w"></span>
<span class="linenos"> 916</span><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="no">char</span><span class="p">)</span><span class="sc">&#39;\e&#39;</span><span class="p">:{</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;e&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;}</span><span class="w"></span>
<span class="linenos"> 917</span><span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="p">(</span><span class="no">char</span><span class="p">)</span><span class="sc">&#39;\&quot;&#39;</span><span class="p">:{</span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;&quot;&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">break</span><span class="p">;}</span><span class="w"></span>
<span class="linenos"> 918</span><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"> </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 919</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 920</span><span class="w">        </span><span class="n">buf</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_null_</span><span class="p">;</span><span class="w"> </span><span class="c1">// terminate</span>
<span class="linenos"> 921</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">buf</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 922</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 923</span><span class="w">    </span><span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input</span><span class="p">;</span><span class="w">  </span><span class="c1">// pass through input</span>
<span class="linenos"> 924</span><span class="w">    </span><span class="n">buf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_null_</span><span class="p">;</span><span class="w"> </span><span class="c1">// terminate the string</span>
<span class="linenos"> 925</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">buf</span><span class="p">;</span><span class="w">      </span><span class="c1">// not a control char</span>
<span class="linenos"> 926</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _escapeCharactersSoTheyPrint</span>
<span class="linenos"> 927</span>
<span class="linenos"> 928</span><span class="kr">inline</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="nf">UserInput::_combineControlCharacters</span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 929</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 930</span><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">input</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 931</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 932</span><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;0&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="sc">&#39;\0&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 933</span><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;a&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="sc">&#39;\a&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 934</span><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;b&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="sc">&#39;\b&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 935</span><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;t&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="sc">&#39;\t&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 936</span><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;n&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="sc">&#39;\n&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 937</span><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;v&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="sc">&#39;\v&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 938</span><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;f&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="sc">&#39;\f&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 939</span><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;r&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="sc">&#39;\r&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 940</span><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;e&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="sc">&#39;\e&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 941</span><span class="w">        </span><span class="k">case</span><span class="w"> </span><span class="sc">&#39;&quot;&#39;</span><span class="p">:</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="sc">&#39;\&quot;&#39;</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 942</span><span class="w">        </span><span class="k">default</span><span class="o">:</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="sc">&#39;*&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// * error</span>
<span class="linenos"> 943</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 944</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _combineControlCharacters</span>
<span class="linenos"> 945</span><span class="c1">// clang-format on</span>
<span class="linenos"> 946</span>
<span class="linenos"> 947</span><span class="kt">bool</span><span class="w"> </span><span class="nf">UserInput::_addCommandAbort</span><span class="p">(</span><span class="n">CommandConstructor</span><span class="o">&amp;</span><span class="w"> </span><span class="n">cmd</span><span class="p">,</span><span class="w"> </span><span class="n">CommandParameters</span><span class="o">&amp;</span><span class="w"> </span><span class="n">prm</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 948</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 949</span><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">error_not</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 950</span><span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">cmd_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 951</span>
<span class="linenos"> 952</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">function</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">depth</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 953</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 954</span><span class="cp">#if defined(ENABLE_ui_out) &amp;&amp; defined(UI_VERBOSE)</span>
<span class="linenos"> 955</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;command &lt;%s&gt; root command function pointer cannot be NULL</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 956</span><span class="cp">#endif</span>
<span class="linenos"> 957</span><span class="w">        </span><span class="n">error_not</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 958</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 959</span>
<span class="linenos"> 960</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">has_wildcards</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 961</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 962</span><span class="w">        </span><span class="kt">size_t</span><span class="w"> </span><span class="n">num_wcc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 963</span><span class="w">        </span><span class="n">IH_wcc</span><span class="w"> </span><span class="n">wcc</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 964</span><span class="w">        </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wcc</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">wildcard_char</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">wcc</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 965</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">cmd_len</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 966</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 967</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">wcc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w"></span>
<span class="linenos"> 968</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 969</span><span class="w">                </span><span class="n">num_wcc</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 970</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 971</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 972</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">num_wcc</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 973</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 974</span><span class="cp">#if defined(ENABLE_ui_out) &amp;&amp; defined(UI_VERBOSE)</span>
<span class="linenos"> 975</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;command &lt;%s&gt; has_wildcard is set, but no wildcards were found in the command</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 976</span><span class="cp">#endif</span>
<span class="linenos"> 977</span><span class="w">            </span><span class="n">error_not</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 978</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 979</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 980</span>
<span class="linenos"> 981</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmd_len</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">UI_MAX_CMD_LEN</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 982</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 983</span><span class="cp">#if defined(ENABLE_ui_out) &amp;&amp; defined(UI_VERBOSE)</span>
<span class="linenos"> 984</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;command &lt;%s&gt; command too long, increase UI_MAX_CMD_LEN or reduce command length.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 985</span><span class="cp">#endif</span>
<span class="linenos"> 986</span><span class="w">        </span><span class="n">error_not</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 987</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 988</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmd_len</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command_length</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 989</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 990</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmd_len</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command_length</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 991</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 992</span><span class="cp">#if defined(ENABLE_ui_out) &amp;&amp; defined(UI_VERBOSE)</span>
<span class="linenos"> 993</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;command &lt;%s&gt; command_length too large for command</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 994</span><span class="cp">#endif</span>
<span class="linenos"> 995</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos"> 996</span><span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="linenos"> 997</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 998</span><span class="cp">#if defined(ENABLE_ui_out) &amp;&amp; defined(UI_VERBOSE)</span>
<span class="linenos"> 999</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;command &lt;%s&gt; command_length too small for command</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">);</span><span class="w"></span>
<span class="linenos">1000</span><span class="cp">#endif</span>
<span class="linenos">1001</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1002</span><span class="w">        </span><span class="n">error_not</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1003</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1004</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">depth</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">UI_MAX_TREE_DEPTH_PER_COMMAND</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1005</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1006</span><span class="cp">#if defined(ENABLE_ui_out) &amp;&amp; defined(UI_VERBOSE)</span>
<span class="linenos">1007</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;command &lt;%s&gt; depth exceeds UI_MAX_DEPTH</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">);</span><span class="w"></span>
<span class="linenos">1008</span><span class="cp">#endif</span>
<span class="linenos">1009</span><span class="w">        </span><span class="n">error_not</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1010</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1011</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">sub_commands</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">UI_MAX_NUM_CHILD_COMMANDS</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1012</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1013</span><span class="cp">#if defined(ENABLE_ui_out) &amp;&amp; defined(UI_VERBOSE)</span>
<span class="linenos">1014</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;command &lt;%s&gt; sub_commands exceeds UI_MAX_SUBCOMMANDS</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">);</span><span class="w"></span>
<span class="linenos">1015</span><span class="cp">#endif</span>
<span class="linenos">1016</span><span class="w">        </span><span class="n">error_not</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1017</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1018</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">num_args</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">UI_MAX_ARGS_PER_COMMAND</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1019</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1020</span><span class="cp">#if defined(ENABLE_ui_out) &amp;&amp; defined(UI_VERBOSE)</span>
<span class="linenos">1021</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;command &lt;%s&gt; num_args exceeds UI_MAX_ARGS</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">);</span><span class="w"></span>
<span class="linenos">1022</span><span class="cp">#endif</span>
<span class="linenos">1023</span><span class="w">        </span><span class="n">error_not</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1024</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1025</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">UI_MAX_ARGS_PER_COMMAND</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1026</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1027</span><span class="cp">#if defined(ENABLE_ui_out) &amp;&amp; defined(UI_VERBOSE)</span>
<span class="linenos">1028</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;command &lt;%s&gt; max_num_args exceeds UI_MAX_ARGS</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">);</span><span class="w"></span>
<span class="linenos">1029</span><span class="cp">#endif</span>
<span class="linenos">1030</span><span class="w">        </span><span class="n">error_not</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1031</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1032</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">num_args</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">max_num_args</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1033</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1034</span><span class="cp">#if defined(ENABLE_ui_out) &amp;&amp; defined(UI_VERBOSE)</span>
<span class="linenos">1035</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;command &lt;%s&gt; num_args must be less than max_num_args</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">);</span><span class="w"></span>
<span class="linenos">1036</span><span class="cp">#endif</span>
<span class="linenos">1037</span><span class="w">        </span><span class="n">error_not</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1038</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1039</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error_not</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"> </span><span class="c1">// error condition</span>
<span class="linenos">1040</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1041</span><span class="cp">#if defined(ENABLE_ui_out) &amp;&amp; defined(UI_VERBOSE)</span>
<span class="linenos">1042</span><span class="w">        </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&lt;%s&gt; CommandParameters error! Root &lt;%s&gt; command tree rejected!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">);</span><span class="w"></span>
<span class="linenos">1043</span><span class="cp">#endif</span>
<span class="linenos">1044</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1045</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">error_not</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1046</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _addCommandAbort</span>
<span class="linenos">1047</span>
<span class="linenos">1048</span><span class="c1">// clang-format off</span>
<span class="linenos">1049</span><span class="kr">inline</span><span class="w"> </span><span class="n">UITYPE</span><span class="w"> </span><span class="nf">UserInput::_getArgType</span><span class="p">(</span><span class="n">CommandParameters</span><span class="w"> </span><span class="o">&amp;</span><span class="n">prm</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">index</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1050</span><span class="p">{</span><span class="w"></span>
<span class="linenos">1051</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">argument_flag</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UI_ARG_HANDLING</span><span class="o">::</span><span class="n">no_args</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">UITYPE</span><span class="o">::</span><span class="n">NO_ARGS</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1052</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">argument_flag</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UI_ARG_HANDLING</span><span class="o">::</span><span class="n">one_type</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">arg_type_arr</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1053</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">argument_flag</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UI_ARG_HANDLING</span><span class="o">::</span><span class="n">type_arr</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">arg_type_arr</span><span class="p">[</span><span class="n">index</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1054</span>
<span class="linenos">1055</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">UITYPE</span><span class="o">::</span><span class="n">_LAST</span><span class="p">;</span><span class="w"> </span><span class="c1">// return error if no match</span>
<span class="linenos">1056</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _getArgType</span>
<span class="linenos">1057</span><span class="c1">// clang-format on</span>
<span class="linenos">1058</span>
<span class="linenos">1059</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::_getArgs</span><span class="p">(</span><span class="n">_rcfbprm</span><span class="o">&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1060</span><span class="p">{</span><span class="w"></span>
<span class="linenos">1061</span><span class="w">    </span><span class="n">_rec_num_arg_strings_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// number of tokens read from data</span>
<span class="linenos">1062</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">tokens_received</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1U</span><span class="p">);</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1063</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1064</span><span class="w">        </span><span class="n">validateNullSepInputParam</span><span class="w"> </span><span class="n">vprm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">UserInput</span><span class="o">::</span><span class="n">_getArgType</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">prm</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">),</span><span class="w"> </span><span class="n">_data_pointers_</span><span class="p">,</span><span class="w"> </span><span class="n">_data_pointers_index_</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">_neg_</span><span class="p">,</span><span class="w"> </span><span class="n">_dot_</span><span class="p">};</span><span class="w"></span>
<span class="linenos">1065</span><span class="w">        </span><span class="n">_input_type_match_flags_</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserInput</span><span class="o">::</span><span class="n">validateNullSepInput</span><span class="p">(</span><span class="n">vprm</span><span class="p">);</span><span class="w"> </span><span class="c1">// validate the token</span>
<span class="linenos">1066</span><span class="w">        </span><span class="n">_rec_num_arg_strings_</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1067</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">_input_type_match_flags_</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"> </span><span class="c1">// if the token was not valid input</span>
<span class="linenos">1068</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1069</span><span class="w">            </span><span class="n">rprm</span><span class="p">.</span><span class="n">all_arguments_valid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// set the error sentinel</span>
<span class="linenos">1070</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1071</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1072</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _getArgs</span>
<span class="linenos">1073</span>
<span class="linenos">1074</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="nf">UserInput::_addEscapedControlCharToBuffer</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="o">&amp;</span><span class="w"> </span><span class="n">idx</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">input</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">input_len</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1075</span><span class="p">{</span><span class="w"></span>
<span class="linenos">1076</span><span class="w">    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">buf</span><span class="p">[</span><span class="n">idx</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1077</span><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">tmp_esc_chr</span><span class="p">[</span><span class="n">UI_ESCAPED_CHAR_STRLEN</span><span class="p">]</span><span class="w"> </span><span class="p">{};</span><span class="w"></span>
<span class="linenos">1078</span><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">input_len</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1079</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1080</span><span class="w">        </span><span class="o">*</span><span class="n">tmp_esc_chr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">UserInput</span><span class="o">::</span><span class="n">_escapeCharactersSoTheyPrint</span><span class="p">(</span><span class="n">input</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">tmp_esc_chr</span><span class="p">);</span><span class="w"></span>
<span class="linenos">1081</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">tmp_esc_chr</span><span class="p">);</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1082</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1083</span><span class="w">            </span><span class="n">buf</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tmp_esc_chr</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1084</span><span class="w">            </span><span class="n">idx</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1085</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1086</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1087</span><span class="w">    </span><span class="n">buf</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_null_</span><span class="p">;</span><span class="w"> </span><span class="c1">// terminate string</span>
<span class="linenos">1088</span><span class="w">    </span><span class="n">idx</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1089</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">start</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1090</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _addEscapedControlCharToBuffer</span>
<span class="linenos">1091</span>
<span class="linenos">1092</span><span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::_getTokensDelimiters</span><span class="p">(</span><span class="n">getTokensParam</span><span class="o">&amp;</span><span class="w"> </span><span class="n">gtprm</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">InputProcessParameters</span><span class="o">&amp;</span><span class="w"> </span><span class="n">input_prm</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1093</span><span class="p">{</span><span class="w"></span>
<span class="linenos">1094</span><span class="w">    </span><span class="n">InputProcessDelimiterSequences</span><span class="w"> </span><span class="n">delimseq</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1095</span><span class="w">    </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">delimseq</span><span class="p">,</span><span class="w"> </span><span class="n">input_prm</span><span class="p">.</span><span class="n">delimiter_sequences</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">delimseq</span><span class="p">));</span><span class="w"></span>
<span class="linenos">1096</span><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">found_delimiter_sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1097</span><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// match delimiter sequence sentinel</span>
<span class="linenos">1098</span><span class="w">    </span><span class="k">do</span><span class="w">                  </span><span class="c1">// skip over delimiters; do-while loops iterate at least once</span>
<span class="linenos">1099</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1100</span><span class="w">        </span><span class="n">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1101</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">delimseq</span><span class="p">.</span><span class="n">num_seq</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1102</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1103</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delimseq</span><span class="p">.</span><span class="n">delimiter_sequences</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">])</span><span class="w"></span>
<span class="linenos">1104</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1105</span><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">delimseq</span><span class="p">.</span><span class="n">delimiter_lens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1U</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1106</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1107</span><span class="w">                    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1108</span><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">memcmp</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">delimseq</span><span class="p">.</span><span class="n">delimiter_sequences</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">delimseq</span><span class="p">.</span><span class="n">delimiter_lens</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// match</span>
<span class="linenos">1109</span><span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1110</span><span class="w">                        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">delimseq</span><span class="p">.</span><span class="n">delimiter_lens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1111</span><span class="w">                        </span><span class="n">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1112</span><span class="w">                        </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1113</span><span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1114</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1115</span><span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="c1">// match</span>
<span class="linenos">1116</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1117</span><span class="w">                    </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1118</span><span class="w">                    </span><span class="n">match</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1119</span><span class="w">                    </span><span class="k">break</span><span class="p">;</span><span class="w"> </span><span class="c1">// break for loop</span>
<span class="linenos">1120</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1121</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1122</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1123</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">match</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1124</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1125</span><span class="w">            </span><span class="n">found_delimiter_sequence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1126</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1127</span><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">match</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span><span class="w"> </span><span class="c1">// end do-while loop</span>
<span class="linenos">1128</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">found_delimiter_sequence</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">_term_len_</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">len</span><span class="p">))</span><span class="w"></span>
<span class="linenos">1129</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1130</span><span class="w">        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">point_to_beginning_of_token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1131</span><span class="w">        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_sep</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1132</span><span class="w">        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1133</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1134</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _getTokensDelimiters</span>
<span class="linenos">1135</span>
<span class="linenos">1136</span><span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::_getTokensStartStop</span><span class="p">(</span><span class="n">getTokensParam</span><span class="o">&amp;</span><span class="w"> </span><span class="n">gtprm</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">InputProcessParameters</span><span class="o">&amp;</span><span class="w"> </span><span class="n">input_prm</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1137</span><span class="p">{</span><span class="w"></span>
<span class="linenos">1138</span><span class="w">    </span><span class="n">InputProcessStartStopSequences</span><span class="w"> </span><span class="n">start_stop_sequences</span><span class="w"> </span><span class="p">{};</span><span class="w"></span>
<span class="linenos">1139</span><span class="w">    </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">start_stop_sequences</span><span class="p">,</span><span class="w"> </span><span class="n">input_prm</span><span class="p">.</span><span class="n">start_stop_sequences</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">start_stop_sequences</span><span class="p">));</span><span class="w"></span>
<span class="linenos">1140</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">start_stop_sequence_pairs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">start_stop_sequence_pairs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">])</span><span class="w"></span>
<span class="linenos">1141</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1142</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">num_seq</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1143</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1144</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">start_stop_sequence_lens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1U</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">start_stop_sequence_lens</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1U</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1145</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1146</span><span class="w">                </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1147</span><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">memcmp</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">start_stop_sequence_pairs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">start_stop_sequence_lens</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// match</span>
<span class="linenos">1148</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1149</span><span class="w">                    </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">start_stop_sequence_lens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1150</span><span class="w">                    </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">];</span><span class="w">                                                                                   </span><span class="c1">// point to beginning of c-string</span>
<span class="linenos">1151</span><span class="w">                    </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">end_ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">memchr</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">start_stop_sequence_pairs</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="p">(</span><span class="n">gtprm</span><span class="p">.</span><span class="n">len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">));</span><span class="w"> </span><span class="c1">// search for next c-string delimiter</span>
<span class="linenos">1152</span><span class="w">                    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">end_ptr</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">len</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1153</span><span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1154</span><span class="w">                        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">memcmp</span><span class="p">(</span><span class="n">end_ptr</span><span class="p">,</span><span class="w"> </span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">start_stop_sequence_pairs</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">start_stop_sequence_lens</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// match end sequence</span>
<span class="linenos">1155</span><span class="w">                        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1156</span><span class="w">                            </span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">end_ptr</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">));</span><span class="w"> </span><span class="c1">// memcpy c-string to token buffer</span>
<span class="linenos">1157</span><span class="w">                            </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">size</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">gtprm</span><span class="p">.</span><span class="n">len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">))</span><span class="w"></span>
<span class="linenos">1158</span><span class="w">                            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1159</span><span class="w">                                </span><span class="n">memcpy</span><span class="p">(</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">);</span><span class="w"></span>
<span class="linenos">1160</span><span class="w">                                </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointers</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1161</span><span class="w">                                </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1162</span><span class="w">                                </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1163</span><span class="w">                                </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_sep</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1164</span><span class="w">                                </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1165</span><span class="w">                                </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1166</span><span class="w">                            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1167</span><span class="w">                            </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1168</span><span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1169</span><span class="w">                        </span><span class="k">else</span><span class="w"></span>
<span class="linenos">1170</span><span class="w">                        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1171</span><span class="w">                            </span><span class="n">end_ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">memchr</span><span class="p">(</span><span class="n">end_ptr</span><span class="p">,</span><span class="w"> </span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">start_stop_sequence_pairs</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="p">(</span><span class="n">gtprm</span><span class="p">.</span><span class="n">len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">));</span><span class="w"></span>
<span class="linenos">1172</span><span class="w">                            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">end_ptr</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1173</span><span class="w">                        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1174</span><span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1175</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1176</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1177</span><span class="w">            </span><span class="k">else</span><span class="w"> </span><span class="c1">// match</span>
<span class="linenos">1178</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1179</span><span class="w">                </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1180</span><span class="w">                </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">];</span><span class="w">                                                                             </span><span class="c1">// point to beginning of c-string</span>
<span class="linenos">1181</span><span class="w">                </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">end_ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">memchr</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">start_stop_sequences</span><span class="p">.</span><span class="n">start_stop_sequence_pairs</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="p">(</span><span class="n">gtprm</span><span class="p">.</span><span class="n">len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">));</span><span class="w"> </span><span class="c1">// search for next c-string delimiter</span>
<span class="linenos">1182</span><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">end_ptr</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w">                                                                                                        </span><span class="c1">// memcpy</span>
<span class="linenos">1183</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1184</span><span class="w">                    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="n">end_ptr</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">ptr</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">));</span><span class="w"></span>
<span class="linenos">1185</span><span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">size</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="p">(</span><span class="n">gtprm</span><span class="p">.</span><span class="n">len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">))</span><span class="w"></span>
<span class="linenos">1186</span><span class="w">                    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1187</span><span class="w">                        </span><span class="n">memcpy</span><span class="p">(</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="p">,</span><span class="w"> </span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="p">);</span><span class="w"></span>
<span class="linenos">1188</span><span class="w">                        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointers</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1189</span><span class="w">                        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1190</span><span class="w">                        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1191</span><span class="w">                        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_sep</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1192</span><span class="w">                        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1193</span><span class="w">                        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1194</span><span class="w">                    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1195</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1196</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1197</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1198</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1199</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _getTokensStartStop</span>
<span class="linenos">1200</span>
<span class="linenos">1201</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::_getTokensChar</span><span class="p">(</span><span class="n">getTokensParam</span><span class="o">&amp;</span><span class="w"> </span><span class="n">gtprm</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">InputProcessParameters</span><span class="o">&amp;</span><span class="w"> </span><span class="n">input_prm</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1202</span><span class="p">{</span><span class="w"></span>
<span class="linenos">1203</span><span class="w">    </span><span class="n">IH_input_cc</span><span class="w"> </span><span class="n">input_control_char_sequence</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1204</span><span class="w">    </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">input_control_char_sequence</span><span class="p">,</span><span class="w"> </span><span class="n">input_prm</span><span class="p">.</span><span class="n">input_control_char_sequence</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">input_control_char_sequence</span><span class="p">));</span><span class="w"></span>
<span class="linenos">1205</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="kt">char</span><span class="p">)</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input_control_char_sequence</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input_control_char_sequence</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3U</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">len</span><span class="p">))</span><span class="w"></span>
<span class="linenos">1206</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1207</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">gtprm</span><span class="p">.</span><span class="n">point_to_beginning_of_token</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1208</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1209</span><span class="w">            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointers</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1210</span><span class="w">            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1211</span><span class="w">            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">point_to_beginning_of_token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1212</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1213</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">UserInput</span><span class="o">::</span><span class="n">_combineControlCharacters</span><span class="p">((</span><span class="kt">char</span><span class="p">)</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2U</span><span class="p">])</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;*&#39;</span><span class="p">)</span><span class="w"> </span><span class="c1">// error</span>
<span class="linenos">1214</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1215</span><span class="w">            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input_control_char_sequence</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1216</span><span class="w">            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input_control_char_sequence</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1217</span><span class="w">            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_combineControlCharacters</span><span class="p">((</span><span class="kt">char</span><span class="p">)</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2U</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">1218</span><span class="w">            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3U</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1219</span><span class="w">            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3U</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1220</span><span class="w">            </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1221</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1222</span><span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="linenos">1223</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1224</span><span class="w">            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_combineControlCharacters</span><span class="p">((</span><span class="kt">char</span><span class="p">)</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2U</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">1225</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1226</span><span class="w">        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1227</span><span class="w">        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3U</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1228</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1229</span><span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="linenos">1230</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1231</span><span class="w">        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1232</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">gtprm</span><span class="p">.</span><span class="n">point_to_beginning_of_token</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1233</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1234</span><span class="w">            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointers</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer</span><span class="p">[</span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1235</span><span class="w">            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_pointer_index</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1236</span><span class="w">            </span><span class="n">gtprm</span><span class="p">.</span><span class="n">point_to_beginning_of_token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1237</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1238</span><span class="w">        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">token_buffer_index</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1239</span><span class="w">        </span><span class="n">gtprm</span><span class="p">.</span><span class="n">data_pos</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1240</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1241</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _getTokensChar</span>
<span class="linenos">1242</span>
<span class="linenos">1243</span><span class="kr">inline</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">UserInput::_splitZDC</span><span class="p">(</span><span class="n">_rcfbprm</span><span class="o">&amp;</span><span class="w"> </span><span class="n">rprm</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">num_zdc</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">CommandParameters</span><span class="o">**</span><span class="w"> </span><span class="n">zdc</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1244</span><span class="p">{</span><span class="w"></span>
<span class="linenos">1245</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">num_zdc</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// if there are zero delim commands</span>
<span class="linenos">1246</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1247</span><span class="w">        </span><span class="n">InputProcessDelimiterSequences</span><span class="w"> </span><span class="n">delimiter_sequences</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1248</span><span class="w">        </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">delim_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pgm_read_byte</span><span class="p">(</span><span class="o">&amp;</span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">delimiter_sequences</span><span class="o">-&gt;</span><span class="n">delimiter_lens</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="linenos">1249</span><span class="w">        </span><span class="kt">size_t</span><span class="w"> </span><span class="n">split_input_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">input_len</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">delim_len</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1U</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1250</span>
<span class="linenos">1251</span><span class="w">        </span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">uint8_t</span><span class="o">*</span><span class="p">)</span><span class="n">calloc</span><span class="p">(</span><span class="n">split_input_len</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">uint8_t</span><span class="p">));</span><span class="w"></span>
<span class="linenos">1252</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="c1">// if there was an error allocating the memory</span>
<span class="linenos">1253</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1254</span><span class="cp">#if defined(__DEBUG_READCOMMANDFROMBUFFER__) &amp;&amp; defined(ENABLE_ui_out)</span>
<span class="linenos">1255</span><span class="w">            </span><span class="n">UserInput</span><span class="o">::</span><span class="n">_ui_out</span><span class="p">(</span><span class="n">PSTR</span><span class="p">(</span><span class="s">&quot;&gt;%s$ERROR: cannot allocate ram to split input for zero delim command.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">pgm_read_dword</span><span class="p">(</span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">process_name</span><span class="p">));</span><span class="w"></span>
<span class="linenos">1256</span><span class="cp">#endif</span>
<span class="linenos">1257</span><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1258</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1259</span><span class="w">        </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">delimiter_sequences</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">delimiter_sequences</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">delimiter_sequences</span><span class="p">));</span><span class="w"></span>
<span class="linenos">1260</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">num_zdc</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="c1">// look for zero delim commands and put a delimiter between the command and data</span>
<span class="linenos">1261</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1262</span><span class="w">            </span><span class="kt">size_t</span><span class="w"> </span><span class="n">cmd_len_pgm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pgm_read_dword</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">zdc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">command_length</span><span class="p">));</span><span class="w">       </span><span class="c1">// read command len from CommandParameters object</span>
<span class="linenos">1263</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">memcmp_P</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">input_data</span><span class="p">,</span><span class="w"> </span><span class="n">zdc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">cmd_len_pgm</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"> </span><span class="c1">// match zdc</span>
<span class="linenos">1264</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1265</span><span class="w">                </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1266</span><span class="w">                </span><span class="n">memcpy</span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="p">,</span><span class="w"> </span><span class="n">rprm</span><span class="p">.</span><span class="n">input_data</span><span class="p">,</span><span class="w"> </span><span class="n">cmd_len_pgm</span><span class="p">);</span><span class="w"> </span><span class="c1">// copy the command into token buffer</span>
<span class="linenos">1267</span><span class="w">                </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cmd_len_pgm</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1268</span><span class="w">                </span><span class="n">memcpy</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">delimiter_sequences</span><span class="p">.</span><span class="n">delimiter_sequences</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">delimiter_sequences</span><span class="p">.</span><span class="n">delimiter_lens</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"> </span><span class="c1">// copy the delimiter into token buffer after the command</span>
<span class="linenos">1269</span><span class="w">                </span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">rprm</span><span class="p">.</span><span class="n">split_input</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cmd_len_pgm</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">delimiter_sequences</span><span class="p">.</span><span class="n">delimiter_lens</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1270</span><span class="w">                </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">rprm</span><span class="p">.</span><span class="n">input_data</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">cmd_len_pgm</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1271</span><span class="w">                </span><span class="n">memcpy</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span><span class="w"> </span><span class="n">src</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">rprm</span><span class="p">.</span><span class="n">input_len</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">cmd_len_pgm</span><span class="p">));</span><span class="w"> </span><span class="c1">// copy the data after the command and delimiter into token buffer</span>
<span class="linenos">1272</span><span class="w">                </span><span class="n">rprm</span><span class="p">.</span><span class="n">token_buffer_len</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1273</span><span class="w">                </span><span class="n">rprm</span><span class="p">.</span><span class="n">input_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">split_input_len</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1274</span><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1275</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1276</span><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="c1">// end for loop</span>
<span class="linenos">1277</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1278</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1279</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _splitZDC</span>
<span class="linenos">1280</span>
<span class="linenos">1281</span><span class="kt">void</span><span class="w"> </span><span class="nf">UserInput::_calcCmdMemcmpRanges</span><span class="p">(</span><span class="w"></span>
<span class="linenos">1282</span><span class="w">    </span><span class="n">CommandConstructor</span><span class="o">&amp;</span><span class="w"> </span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">CommandParameters</span><span class="o">&amp;</span><span class="w"> </span><span class="n">prm</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">prm_idx</span><span class="p">,</span><span class="w"> </span><span class="n">IH</span><span class="o">::</span><span class="n">memcmp_idx_t</span><span class="o">&amp;</span><span class="w"> </span><span class="n">memcmp_ranges_idx</span><span class="p">,</span><span class="w"> </span><span class="n">IH</span><span class="o">::</span><span class="n">ui_max_per_cmd_memcmp_ranges_t</span><span class="o">*</span><span class="w"> </span><span class="n">memcmp_ranges</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1283</span><span class="p">{</span><span class="w"></span>
<span class="linenos">1284</span><span class="w">    </span><span class="c1">// this function is only used inside of UserInput::addCommand() and is not iterated over in loop()</span>
<span class="linenos">1285</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">has_wildcards</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="c1">// if this command has wildcards</span>
<span class="linenos">1286</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1287</span><span class="w">        </span><span class="n">IH_wcc</span><span class="w"> </span><span class="n">wcc</span><span class="p">;</span><span class="w">                                             </span><span class="c1">// char array to hold WildCard Character (wcc)</span>
<span class="linenos">1288</span><span class="w">        </span><span class="kt">size_t</span><span class="w"> </span><span class="n">cmd_str_pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">                                 </span><span class="c1">// prm.command char array index</span>
<span class="linenos">1289</span><span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="n">start_memcmp_range</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w">                         </span><span class="c1">// sentinel</span>
<span class="linenos">1290</span><span class="w">        </span><span class="n">memcpy_P</span><span class="p">(</span><span class="o">&amp;</span><span class="n">wcc</span><span class="p">,</span><span class="w"> </span><span class="n">_input_prm_</span><span class="p">.</span><span class="n">wildcard_char</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">wcc</span><span class="p">));</span><span class="w"> </span><span class="c1">// copy WildCard Character (wcc) to ram</span>
<span class="linenos">1291</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command_length</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1292</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1293</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">wcc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w"> </span><span class="c1">// detect wildcard char</span>
<span class="linenos">1294</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1295</span><span class="w">                </span><span class="n">cmd_str_pos</span><span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="c1">// use cmd_str_pos as temp counter</span>
<span class="linenos">1296</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1297</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1298</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmd_str_pos</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">))</span><span class="w"> </span><span class="c1">// all wildcard char command, strlen is safe to use on prm.command</span>
<span class="linenos">1299</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1300</span><span class="w">            </span><span class="n">memcmp_ranges</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UI_ALL_WCC_CMD</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1301</span><span class="w">            </span><span class="n">memcmp_ranges</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UI_ALL_WCC_CMD</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1302</span><span class="w">            </span><span class="n">memcmp_ranges_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1303</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1304</span><span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="linenos">1305</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1306</span><span class="w">            </span><span class="n">cmd_str_pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1307</span><span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">cmd_str_pos</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command_length</span><span class="p">)</span><span class="w"> </span><span class="c1">// iterate over whole command len</span>
<span class="linenos">1308</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1309</span><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">[</span><span class="n">cmd_str_pos</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">wcc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w"></span>
<span class="linenos">1310</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1311</span><span class="w">                    </span><span class="n">cmd_str_pos</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1312</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1313</span><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">[</span><span class="n">cmd_str_pos</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">wcc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">start_memcmp_range</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="c1">// start memcmp range</span>
<span class="linenos">1314</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1315</span><span class="w">                    </span><span class="n">memcmp_ranges</span><span class="p">[</span><span class="n">memcmp_ranges_idx</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cmd_str_pos</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1316</span><span class="w">                    </span><span class="n">memcmp_ranges_idx</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1317</span><span class="w">                    </span><span class="n">start_memcmp_range</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1318</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1319</span><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">[</span><span class="n">cmd_str_pos</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">wcc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">prm</span><span class="p">.</span><span class="n">command</span><span class="p">[</span><span class="n">cmd_str_pos</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">wcc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="w"> </span><span class="c1">// end memcmp range</span>
<span class="linenos">1320</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1321</span><span class="w">                    </span><span class="n">memcmp_ranges</span><span class="p">[</span><span class="n">memcmp_ranges_idx</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cmd_str_pos</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1322</span><span class="w">                    </span><span class="n">memcmp_ranges_idx</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1323</span><span class="w">                    </span><span class="n">start_memcmp_range</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1324</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1325</span><span class="w">                </span><span class="n">cmd_str_pos</span><span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="c1">// increment char array index</span>
<span class="linenos">1326</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1327</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">memcmp_ranges_idx</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// memcmp ranges needs to be / 2</span>
<span class="linenos">1328</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1329</span><span class="w">                </span><span class="n">memcmp_ranges</span><span class="p">[</span><span class="n">memcmp_ranges_idx</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cmd_str_pos</span><span class="p">;</span><span class="w"> </span><span class="c1">// remember the end of the array</span>
<span class="linenos">1330</span><span class="w">                </span><span class="n">memcmp_ranges_idx</span><span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1331</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1332</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1333</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1334</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _calcCmdMemcmpRanges</span>
<span class="linenos">1335</span>
<span class="linenos">1336</span><span class="kr">inline</span><span class="w"> </span><span class="n">UI_COMPARE</span><span class="w"> </span><span class="nf">UserInput::_compareCommandToString</span><span class="p">(</span><span class="n">CommandConstructor</span><span class="o">*</span><span class="w"> </span><span class="n">cmd</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">prm_idx</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">str</span><span class="p">)</span><span class="w"></span>
<span class="linenos">1337</span><span class="p">{</span><span class="w"></span>
<span class="linenos">1338</span><span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">cmd_len_pgm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pgm_read_dword</span><span class="p">(</span><span class="o">&amp;</span><span class="p">(</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">prm</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">].</span><span class="n">command_length</span><span class="p">));</span><span class="w"> </span><span class="c1">// the length of the command in PROGMEM</span>
<span class="linenos">1339</span><span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">input_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strlen</span><span class="p">(</span><span class="n">str</span><span class="p">);</span><span class="w">                                           </span><span class="c1">// the length of the input, str is a token in _token_buffer_ it is safe to assume it is null terminated</span>
<span class="linenos">1340</span>
<span class="linenos">1341</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">input_len</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">cmd_len_pgm</span><span class="p">)</span><span class="w"> </span><span class="c1">// no match (length different)</span>
<span class="linenos">1342</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1343</span><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">no_match</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1344</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1345</span>
<span class="linenos">1346</span><span class="w">    </span><span class="n">UI_COMPARE</span><span class="w"> </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_match</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1347</span>
<span class="linenos">1348</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="n">pgm_read_byte</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">prm</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">].</span><span class="n">has_wildcards</span><span class="p">))</span><span class="w"> </span><span class="c1">// no wildcards</span>
<span class="linenos">1349</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1350</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">memcmp_P</span><span class="p">(</span><span class="n">str</span><span class="p">,</span><span class="w"> </span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">prm</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">].</span><span class="n">command</span><span class="p">,</span><span class="w"> </span><span class="n">cmd_len_pgm</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// doesn&#39;t match</span>
<span class="linenos">1351</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1352</span><span class="w">            </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_match</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1353</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1354</span><span class="w">        </span><span class="k">else</span><span class="w"></span>
<span class="linenos">1355</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1356</span><span class="w">            </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">match</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1357</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1358</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1359</span><span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="c1">// has wildcards</span>
<span class="linenos">1360</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1361</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">UI_ALL_WCC_CMD</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">UI_ALL_WCC_CMD</span><span class="p">)</span><span class="w"> </span><span class="c1">// but is not an all wcc cmd</span>
<span class="linenos">1362</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1363</span><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">num_memcmp_ranges_this_row</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">];</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="c1">// iterate through memcmp range sets</span>
<span class="linenos">1364</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1365</span><span class="w">                </span><span class="kt">long</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">][</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">][</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<span class="linenos">1366</span><span class="w">                </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">abs</span><span class="p">(</span><span class="n">result</span><span class="p">);</span><span class="w"> </span><span class="c1">// remove the sign</span>
<span class="linenos">1367</span><span class="w">                </span><span class="kt">size_t</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">((</span><span class="kt">size_t</span><span class="p">)</span><span class="n">result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="p">)</span><span class="n">result</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1368</span><span class="w">                </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">cmp_ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">str</span><span class="p">[</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">][</span><span class="n">i</span><span class="p">]];</span><span class="w"></span>
<span class="linenos">1369</span><span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">memcmp_P</span><span class="p">(</span><span class="n">cmp_ptr</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">prm</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">].</span><span class="n">command</span><span class="p">[</span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">][</span><span class="n">i</span><span class="p">]]),</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// doesn&#39;t match</span>
<span class="linenos">1370</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1371</span><span class="w">                    </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">no_match</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1372</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1373</span><span class="w">                </span><span class="k">else</span><span class="w"></span>
<span class="linenos">1374</span><span class="w">                </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1375</span><span class="w">                    </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">match</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1376</span><span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1377</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1378</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1379</span><span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cmd_len_pgm</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">input_len</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UI_ALL_WCC_CMD</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">cmd</span><span class="o">-&gt;</span><span class="n">calc</span><span class="o">-&gt;</span><span class="n">memcmp_ranges_arr</span><span class="p">[</span><span class="n">prm_idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">UI_ALL_WCC_CMD</span><span class="p">)</span><span class="w"> </span><span class="c1">// all wcc</span>
<span class="linenos">1380</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">1381</span><span class="w">            </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">match_all_wcc_cmd</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1382</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1383</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">1384</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">retval</span><span class="p">;</span><span class="w"></span>
<span class="linenos">1385</span><span class="p">}</span><span class="w"> </span><span class="c1">// end _compareCommandToString()</span>
<span class="linenos">1386</span>
<span class="linenos">1387</span><span class="c1">// end of file</span>
</pre></div>
</div>
</div>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          <a class="prev-page" href="InputHandler_h.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">InputHandler.h</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022, Douglas Quigg (dquigg123@gmail.com)
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    </body>
</html>